{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/components/Modals/CategoriesSearch.jsx\";\nimport React, { Component } from \"react\";\nimport { Col, FormGroup, Input, Button } from \"reactstrap\";\nimport SubmitButton from \"../Controls/SubmitButton\";\nimport \"./categories_modal.scss\";\nimport { FaSearch } from \"react-icons/fa\";\nimport axiosInstance from \"../misc/Axios\";\nimport { flatten } from \"../misc/functions\";\nimport _ from \"lodash\";\nimport Row from \"reactstrap/lib/Row\";\nexport default class CategoriesSearch extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.onChange = e => {\n      // console.log(e.target.name)\n      this.setState({ ...this.state,\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.componentDidMount = () => {\n      // var instance = axiosInstance.get(`/categories/?type=tree`)\n      Promise.all([axiosInstance.get(`/categories/?type=roots`), axiosInstance.get(`/categories/?type=no_children`)]).then(([structuredResponse, unstructuredResponse]) => {\n        var unstructured = unstructuredResponse.data.data;\n        console.log(structuredResponse, unstructuredResponse);\n\n        if (structuredResponse.status == \"UNAUTHENTICATED\") {} else {\n          this.setState({ ...this.state,\n            categories: [...structuredResponse.data.data],\n            flat_categories: unstructured\n          });\n        }\n      });\n    };\n\n    this.onSubmit = e => {\n      // console.log(\"Searching\");\n      e.preventDefault();\n      var self = this;\n      var instance = axiosInstance.get(`/categories/?search_string=${this.state.search_string}&search=true`);\n      instance.then(response => {\n        // console.log(response);\n        if (response.status == \"UNAUTHENTICATED\") {} else {\n          self.setState({ ...self.state,\n            categories: [...response.data.data]\n          });\n        }\n      }).catch(error => {// console.log(error);\n      });\n    };\n\n    this.state = {\n      categories: [],\n      search_string: \"\",\n      ancestry: [],\n      category: {},\n      menu_tree: [],\n      dtOptions1: {\n        paging: true,\n        // Table pagination\n        ordering: true,\n        // Column ordering\n        info: true,\n        // Bottom left status text\n        responsive: true,\n        // Text translation options\n        // Note the required keywords between underscores (e.g _MENU_)\n        oLanguage: {\n          sSearch: '<em class=\"fa fa-search\"></em>',\n          sLengthMenu: \"_MENU_ records per page\",\n          info: \"Showing page _PAGE_ of _PAGES_\",\n          zeroRecords: \"Nothing found - sorry\",\n          infoEmpty: \"No records available\",\n          infoFiltered: \"(filtered from _MAX_ total records)\",\n          oPaginate: {\n            sNext: '<em class=\"fa fa-caret-right\"></em>',\n            sPrevious: '<em class=\"fa fa-caret-left\"></em>'\n          }\n        }\n      }\n    };\n  }\n\n  selectCategories(e) {\n    // this.state.categories.\n    // console.log(e)\n    var menu_tree = [];\n    console.log(\"THIS IS DATAITEM\", e.target.getAttribute(\"data-item\"));\n    var id = parseInt(e.target.getAttribute(\"data-item\"));\n    var category = this.state.flat_categories.find(obj => obj.id == e.target.getAttribute(\"data-item\"));\n    var index = this.state.flat_categories.findIndex(obj => obj.id == e.target.getAttribute(\"data-item\"));\n    var new_flat_categories = [...this.state.flat_categories];\n    var new_ancestry = [];\n    axiosInstance.get(`/categories/${category.uuid}?type=children`).then(response => {\n      var new_category = response.data.category;\n      console.log(\"THIS IS CATEGORY FROM SERVER\", new_category);\n\n      if (category.ancestry == null || category.ancestry == \"\") {\n        console.log(\"USING 1\"); // console.log(\"SETTING USING ID\", category.id)\n        // new_ancestry = [...this.state.ancestry]\n        // console.log(\"NEW ANCESTRY BEFORE\", new_ancestry)\n\n        new_ancestry.push(category.id);\n      } else {\n        console.log(\"USING 2\");\n        console.log(\"USING ANCESTRY VALUE\", category.ancestry);\n        var anc_arr = category.ancestry.split(\"/\").map(val => parseInt(val));\n        console.log(\"USING ANCESTRY ARR\", anc_arr);\n        new_ancestry = [...anc_arr, category.id]; // new_ancestry.concat([category.id])\n\n        console.log(\"THIS IS NEW ANCESTRY ARR\", new_ancestry);\n      }\n\n      new_flat_categories[index] = { ...new_category\n      };\n      this.setState({ ...this.state,\n        // categories: new_categories,\n        category: category,\n        ancestry: [...new_ancestry],\n        flat_categories: new_flat_categories,\n        category_id: category.id,\n        // opened_category_id: id,\n        menu_tree: menu_tree\n      });\n    });\n    this.props.selectCategory(category);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      className: \"catWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"categoryBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, this.state.categories.map((row, i) => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        \"data-item\": row.id,\n        onClick: this.selectCategories.bind(this),\n        key: i + 1,\n        category: row,\n        className: this.state.ancestry.includes(row.id) ? \"selected\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 19\n        }\n      }, row.name);\n    }))), this.state.ancestry.map(anc => {\n      console.log(\"THIS IS ANCESTRY\", anc);\n      var category = this.state.flat_categories.find(cat => cat.id == anc);\n      console.log(\"THIS IS CATEGORY\", category);\n      return _.isEmpty(category.children) ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"categoryBox\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }\n      }, category.children.map((cat, i) => {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          \"data-item\": cat.id,\n          onClick: this.selectCategories.bind(this),\n          key: i + 1,\n          category: cat,\n          className: this.state.ancestry.includes(cat.id) ? \"selected\" : \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 23\n          }\n        }, cat.name);\n      })));\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/components/Modals/CategoriesSearch.jsx"],"names":["React","Component","Col","FormGroup","Input","Button","SubmitButton","FaSearch","axiosInstance","flatten","_","Row","CategoriesSearch","onChange","e","setState","state","target","name","value","componentDidMount","Promise","all","get","then","structuredResponse","unstructuredResponse","unstructured","data","console","log","status","categories","flat_categories","onSubmit","preventDefault","self","instance","search_string","response","catch","error","ancestry","category","menu_tree","dtOptions1","paging","ordering","info","responsive","oLanguage","sSearch","sLengthMenu","zeroRecords","infoEmpty","infoFiltered","oPaginate","sNext","sPrevious","selectCategories","getAttribute","id","parseInt","find","obj","index","findIndex","new_flat_categories","new_ancestry","uuid","new_category","push","anc_arr","split","map","val","category_id","props","selectCategory","render","row","i","bind","includes","anc","cat","isEmpty","children"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Col, FormGroup, Input, Button } from \"reactstrap\";\nimport SubmitButton from \"../Controls/SubmitButton\";\nimport \"./categories_modal.scss\";\nimport { FaSearch } from \"react-icons/fa\";\nimport axiosInstance from \"../misc/Axios\";\nimport { flatten } from \"../misc/functions\";\nimport _ from \"lodash\";\nimport Row from \"reactstrap/lib/Row\";\nexport default class CategoriesSearch extends Component {\n  onChange = (e) => {\n    // console.log(e.target.name)\n    this.setState({\n      ...this.state,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  componentDidMount = () => {\n    // var instance = axiosInstance.get(`/categories/?type=tree`)\n    Promise.all([\n      axiosInstance.get(`/categories/?type=roots`),\n      axiosInstance.get(`/categories/?type=no_children`),\n    ]).then(([structuredResponse, unstructuredResponse]) => {\n      var unstructured = unstructuredResponse.data.data;\n      console.log(structuredResponse, unstructuredResponse);\n      if (structuredResponse.status == \"UNAUTHENTICATED\") {\n      } else {\n        this.setState({\n          ...this.state,\n          categories: [...structuredResponse.data.data],\n          flat_categories: unstructured,\n        });\n      }\n    });\n  };\n  onSubmit = (e) => {\n    // console.log(\"Searching\");\n    e.preventDefault();\n    var self = this;\n\n    var instance = axiosInstance.get(\n      `/categories/?search_string=${this.state.search_string}&search=true`\n    );\n    instance\n      .then((response) => {\n        // console.log(response);\n        if (response.status == \"UNAUTHENTICATED\") {\n        } else {\n          self.setState({\n            ...self.state,\n            categories: [...response.data.data],\n          });\n        }\n      })\n      .catch((error) => {\n        // console.log(error);\n      });\n  };\n\n  state = {\n    categories: [],\n    search_string: \"\",\n    ancestry: [],\n    category: {},\n    menu_tree: [],\n    dtOptions1: {\n      paging: true, // Table pagination\n      ordering: true, // Column ordering\n      info: true, // Bottom left status text\n      responsive: true,\n      // Text translation options\n      // Note the required keywords between underscores (e.g _MENU_)\n      oLanguage: {\n        sSearch: '<em class=\"fa fa-search\"></em>',\n        sLengthMenu: \"_MENU_ records per page\",\n        info: \"Showing page _PAGE_ of _PAGES_\",\n        zeroRecords: \"Nothing found - sorry\",\n        infoEmpty: \"No records available\",\n        infoFiltered: \"(filtered from _MAX_ total records)\",\n        oPaginate: {\n          sNext: '<em class=\"fa fa-caret-right\"></em>',\n          sPrevious: '<em class=\"fa fa-caret-left\"></em>',\n        },\n      },\n    },\n  };\n  selectCategories(e) {\n    // this.state.categories.\n    // console.log(e)\n    var menu_tree = [];\n    console.log(\"THIS IS DATAITEM\", e.target.getAttribute(\"data-item\"));\n    var id = parseInt(e.target.getAttribute(\"data-item\"));\n\n    var category = this.state.flat_categories.find(\n      (obj) => obj.id == e.target.getAttribute(\"data-item\")\n    );\n    var index = this.state.flat_categories.findIndex(\n      (obj) => obj.id == e.target.getAttribute(\"data-item\")\n    );\n    var new_flat_categories = [...this.state.flat_categories];\n\n    var new_ancestry = [];\n\n    axiosInstance\n      .get(`/categories/${category.uuid}?type=children`)\n      .then((response) => {\n        var new_category = response.data.category;\n        console.log(\"THIS IS CATEGORY FROM SERVER\", new_category);\n        if (category.ancestry == null || category.ancestry == \"\") {\n          console.log(\"USING 1\");\n          // console.log(\"SETTING USING ID\", category.id)\n          // new_ancestry = [...this.state.ancestry]\n          // console.log(\"NEW ANCESTRY BEFORE\", new_ancestry)\n          new_ancestry.push(category.id);\n        } else {\n          console.log(\"USING 2\");\n          console.log(\"USING ANCESTRY VALUE\", category.ancestry);\n          var anc_arr = category.ancestry\n            .split(\"/\")\n            .map((val) => parseInt(val));\n          console.log(\"USING ANCESTRY ARR\", anc_arr);\n          new_ancestry = [...anc_arr, category.id];\n          // new_ancestry.concat([category.id])\n          console.log(\"THIS IS NEW ANCESTRY ARR\", new_ancestry);\n        }\n        new_flat_categories[index] = { ...new_category };\n        this.setState({\n          ...this.state,\n          // categories: new_categories,\n          category: category,\n          ancestry: [...new_ancestry],\n          flat_categories: new_flat_categories,\n          category_id: category.id,\n          // opened_category_id: id,\n          menu_tree: menu_tree,\n        });\n      });\n\n    this.props.selectCategory(category);\n  }\n\n  render() {\n    return (\n      <Col className=\"catWrapper\">\n        <Row>\n          <div className=\"categoryBox\">\n            <ul>\n              {this.state.categories.map((row, i) => {\n                return (\n                  <li\n                    data-item={row.id}\n                    onClick={this.selectCategories.bind(this)}\n                    key={i + 1}\n                    category={row}\n                    className={\n                      this.state.ancestry.includes(row.id) ? \"selected\" : \"\"\n                    }\n                  >\n                    {row.name}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n          {this.state.ancestry.map((anc) => {\n            console.log(\"THIS IS ANCESTRY\", anc);\n            var category = this.state.flat_categories.find(\n              (cat) => cat.id == anc\n            );\n            console.log(\"THIS IS CATEGORY\", category);\n\n            return _.isEmpty(category.children) ? (\n              \"\"\n            ) : (\n              <div className=\"categoryBox\">\n                <ul>\n                  {category.children.map((cat, i) => {\n                    return (\n                      <li\n                        data-item={cat.id}\n                        onClick={this.selectCategories.bind(this)}\n                        key={i + 1}\n                        category={cat}\n                        className={\n                          this.state.ancestry.includes(cat.id) ? \"selected\" : \"\"\n                        }\n                      >\n                        {cat.name}\n                      </li>\n                    );\n                  })}\n                </ul>\n              </div>\n            );\n          })}\n        </Row>\n      </Col>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}