{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/components/PointsConfiguration/PointsListing.jsx\";\nimport React, { Component } from \"react\";\nimport { Col, Card, CardBody, CardTitle, CardText } from \"reactstrap\";\nimport ReactWillPaginateTable from \"../../lib/ReactWillPaginateTable\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport axiosInstance from \"../misc/Axios\";\nimport * as actions from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport { BarChart, ColumnChart, LineChart, PieChart } from \"react-chartkick\";\nimport \"chartkick/chart.js\";\nimport _ from \"lodash\";\nimport { bindActionCreators } from \"redux\";\nimport Table from \"reactstrap/lib/Table\";\nimport NumberField from \"../Controls/NumberField\";\nimport ReportFilterWidget from \"../ReportFilterWidget/ReportFilterWidget\";\nimport moment from \"moment\";\nimport \"react-datetime/css/react-datetime.css\";\n\nclass PointsListing extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      loading: false,\n      start_date: new moment(),\n      end_date: new moment()\n    };\n\n    this.componentDidMount = () => {\n      this.populate();\n    };\n\n    this.run = e => {\n      e.preventDefault();\n      this.populate();\n    };\n\n    this.populate = () => {\n      axiosInstance.get(`${this.props.authentication.default_path}customer_points_listings?start_date=${this.state.start_date.format(\"YYYY-MM-DD\")}&end_date=${this.state.end_date.format(\"YYYY-MM-DD\")}`).then(response => {\n        console.log(\"THIS IS RESPONSE FON SERVER\", response);\n\n        if (response.status == 200) {\n          this.setState({ ...this.state,\n            data: response.data.data\n          });\n        }\n      });\n    };\n\n    this.onDateChanged = (attr_name, momentdate) => {\n      var new_date = new moment();\n\n      if (momentdate.constructor.name == new_date.constructor.name) {\n        var new_state = { ...this.state,\n          [attr_name]: momentdate\n        };\n        this.setState({ ...new_state\n        });\n      } else {\n        console.log(this.state[attr_name]);\n        var date = new moment(this.state[attr_name]);\n        var new_state = { ...this.state,\n          [attr_name]: date\n        };\n        this.setState({ ...new_state\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, \"Points Listing By Date\"), /*#__PURE__*/React.createElement(CardText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ReportFilterWidget, {\n      run: this.run,\n      onDateChanged: this.onDateChanged,\n      start_date: this.state.start_date,\n      end_date: this.state.end_date,\n      detailed: this.state.detailed,\n      handleChangeToggle: this.handleChangeToggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(LineChart, {\n      data: this.state.data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }\n    }, \"\\xA0\"), /*#__PURE__*/React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, \"Order Number\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, \"Customer Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, \"Points\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, this.state.data.map(item => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }\n      }, item.created_at), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }\n      }, item.number), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }\n      }, item.customer_name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }\n      }, item.description), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }\n      }, item.points));\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  authentication: state.authentication\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(actions, dispatch)\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(PointsListing));","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/components/PointsConfiguration/PointsListing.jsx"],"names":["React","Component","Col","Card","CardBody","CardTitle","CardText","ReactWillPaginateTable","Link","withRouter","axiosInstance","actions","connect","BarChart","ColumnChart","LineChart","PieChart","_","bindActionCreators","Table","NumberField","ReportFilterWidget","moment","PointsListing","state","data","loading","start_date","end_date","componentDidMount","populate","run","e","preventDefault","get","props","authentication","default_path","format","then","response","console","log","status","setState","onDateChanged","attr_name","momentdate","new_date","constructor","name","new_state","date","render","detailed","handleChangeToggle","map","item","created_at","number","customer_name","description","points","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Col, Card, CardBody, CardTitle, CardText } from \"reactstrap\";\nimport ReactWillPaginateTable from \"../../lib/ReactWillPaginateTable\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport axiosInstance from \"../misc/Axios\";\nimport * as actions from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport { BarChart, ColumnChart, LineChart, PieChart } from \"react-chartkick\";\nimport \"chartkick/chart.js\";\n\nimport _ from \"lodash\";\n\nimport { bindActionCreators } from \"redux\";\nimport Table from \"reactstrap/lib/Table\";\nimport NumberField from \"../Controls/NumberField\";\nimport ReportFilterWidget from \"../ReportFilterWidget/ReportFilterWidget\";\nimport moment from \"moment\";\n\nimport \"react-datetime/css/react-datetime.css\";\nclass PointsListing extends Component {\n  state = {\n    data: [],\n    loading: false,\n    start_date: new moment(),\n    end_date: new moment(),\n  };\n  componentDidMount = () => {\n    this.populate();\n  };\n  run = (e) => {\n    e.preventDefault();\n    this.populate();\n  };\n  populate = () => {\n    axiosInstance\n      .get(\n        `${\n          this.props.authentication.default_path\n        }customer_points_listings?start_date=${this.state.start_date.format(\n          \"YYYY-MM-DD\"\n        )}&end_date=${this.state.end_date.format(\"YYYY-MM-DD\")}`\n      )\n      .then((response) => {\n        console.log(\"THIS IS RESPONSE FON SERVER\", response);\n        if (response.status == 200) {\n          this.setState({\n            ...this.state,\n            data: response.data.data,\n          });\n        }\n      });\n  };\n  onDateChanged = (attr_name, momentdate) => {\n    var new_date = new moment();\n    if (momentdate.constructor.name == new_date.constructor.name) {\n      var new_state = {\n        ...this.state,\n        [attr_name]: momentdate,\n      };\n      this.setState({ ...new_state });\n    } else {\n      console.log(this.state[attr_name]);\n      var date = new moment(this.state[attr_name]);\n      var new_state = {\n        ...this.state,\n        [attr_name]: date,\n      };\n      this.setState({ ...new_state });\n    }\n  };\n  render() {\n    return (\n      <Col md={12}>\n        <Card>\n          <CardBody>\n            <CardTitle>Points Listing By Date</CardTitle>\n            <CardText>\n              <ReportFilterWidget\n                run={this.run}\n                onDateChanged={this.onDateChanged}\n                start_date={this.state.start_date}\n                end_date={this.state.end_date}\n                detailed={this.state.detailed}\n                handleChangeToggle={this.handleChangeToggle}\n              />\n              <LineChart data={this.state.data} />\n              <p>&nbsp;</p>\n              <Table striped={true} bordered={true}>\n                <thead>\n                  <tr>\n                    <th>Date</th>\n                    <th>Order Number</th>\n                    <th>Customer Name</th>\n                    <th>Description</th>\n                    <th>Points</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {this.state.data.map((item) => {\n                    return (\n                      <tr>\n                        <td>{item.created_at}</td>\n                        <td>{item.number}</td>\n                        <td>{item.customer_name}</td>\n                        <td>{item.description}</td>\n                        <td>{item.points}</td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </Table>\n            </CardText>\n          </CardBody>\n        </Card>\n      </Col>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({ authentication: state.authentication });\nconst mapDispatchToProps = (dispatch) => ({\n  actions: bindActionCreators(actions, dispatch),\n});\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(PointsListing)\n);\n"]},"metadata":{},"sourceType":"module"}