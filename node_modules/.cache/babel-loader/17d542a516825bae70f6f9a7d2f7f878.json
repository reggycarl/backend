{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/components/misc/Axios.js\";\nimport axios from \"axios\";\nimport { bindActionCreators } from \"redux\";\nimport * as actions from \"../../actions\";\nimport { logout } from \"../../actions/\";\nimport { connect } from \"react-redux\";\nimport { store } from \"../../index\";\nimport { toast } from \"react-toastify\";\nimport React from \"react\";\nimport _ from \"lodash\";\nexport var baseurl = process.env.REACT_APP_BASEURL;\nexport var mainBaseurl = process.env.REACT_APP_MAINBASEURL;\nexport const API_WS_ROOT = process.env.REACT_APP_API_WS_ROOT;\nexport const FRONTENDURL = process.env.REACT_APP_FRONTENDURL;\nvar header_information;\nexport const HEADERS = {\n  \"Content-Type\": \"application/json\",\n  Accept: \"application/json\"\n};\nconst axiosInstance = axios.create({\n  baseURL: mainBaseurl\n});\n\nasync function getCredentials() {\n  var token = await localStorage.getItem(\"token\");\n  var uid = await localStorage.getItem(\"uid\");\n  var client = await localStorage.getItem(\"client\");\n  return {\n    token,\n    uid\n  };\n}\n\nasync function getheaderInformation() {\n  var token = await localStorage.getItem(\"token\");\n  var uid = await localStorage.getItem(\"uid\");\n  var client = await localStorage.getItem(\"client\");\n  return {\n    token: token,\n    uid: uid,\n    client: client\n  };\n}\n\naxiosInstance.interceptors.request.use(function (config) {\n  var headerInformation = getheaderInformation();\n  var {\n    token,\n    uid,\n    client\n  } = getCredentials();\n  config.headers = {\n    \"Content-Type\": \"application/json\",\n    \"access-token\": localStorage.getItem(\"token\"),\n    uid: localStorage.getItem(\"uid\"),\n    client: localStorage.getItem(\"client\")\n  };\n  return config;\n});\naxiosInstance.interceptors.response.use(response => {\n  if (response.status == 202) {\n    toast.success(response.data.message);\n  }\n\n  if (response.status == 200 && !_.isEmpty(response.data.message)) {\n    toast.success(response.data.message);\n  }\n\n  if (response.status == 200 && !_.isEmpty(response.data.error)) {\n    toast.error(response.data.error);\n  }\n\n  return response;\n}, function (error) {\n  // Any status codes that falls outside the range of 2xx cause this function to trigger\n  // Do something with response error\n  // console.log(\"THIS IS ERROR\", error.response);\n  if (error.response.status == 400) {\n    toast.error(errorMessages(error.response.data)); // store.dispatch(logout())\n  }\n\n  if (error.response.status == 401) {\n    toast.error(errorMessages(error.response.data));\n    store.dispatch(logout());\n  }\n\n  if (error.response.status == 404) {\n    toast.error(errorMessages(error.response.data)); // store.dispatch(logout())\n  }\n\n  return Promise.reject(error);\n});\nexport function errorMessages(errors) {\n  console.log(errors);\n  var string = [];\n  var keys = Object.keys(errors.errors);\n  errors = errors.errors;\n  keys.map((row, i) => {\n    console.log(\"THIS IS ROW\", row);\n\n    if (row == \"full_messages\") {\n      return false;\n    } else if (Number.isInteger(row)) {\n      string.push( /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 19\n        }\n      }, errors[row]));\n    } else {\n      var new_row = row.replace(\"_\", \" \");\n      new_row = new_row.charAt(0).toUpperCase() + new_row.slice(1);\n      string.push( /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 19\n        }\n      }, errors[row]));\n    }\n\n    return string;\n  });\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 10\n    }\n  }, string);\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.authentication.user,\n    token: state.authentication.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(actions, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(axiosInstance);","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/components/misc/Axios.js"],"names":["axios","bindActionCreators","actions","logout","connect","store","toast","React","_","baseurl","process","env","REACT_APP_BASEURL","mainBaseurl","REACT_APP_MAINBASEURL","API_WS_ROOT","REACT_APP_API_WS_ROOT","FRONTENDURL","REACT_APP_FRONTENDURL","header_information","HEADERS","Accept","axiosInstance","create","baseURL","getCredentials","token","localStorage","getItem","uid","client","getheaderInformation","interceptors","request","use","config","headerInformation","headers","response","status","success","data","message","isEmpty","error","errorMessages","dispatch","Promise","reject","errors","console","log","string","keys","Object","map","row","i","Number","isInteger","push","new_row","replace","charAt","toUpperCase","slice","mapStateToProps","state","user","authentication","mapDispatchToProps"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { bindActionCreators } from \"redux\";\nimport * as actions from \"../../actions\";\nimport { logout } from \"../../actions/\";\nimport { connect } from \"react-redux\";\nimport { store } from \"../../index\";\nimport { toast } from \"react-toastify\";\nimport React from \"react\";\nimport _ from \"lodash\";\nexport var baseurl = process.env.REACT_APP_BASEURL;\nexport var mainBaseurl = process.env.REACT_APP_MAINBASEURL;\nexport const API_WS_ROOT = process.env.REACT_APP_API_WS_ROOT;\nexport const FRONTENDURL = process.env.REACT_APP_FRONTENDURL;\n\nvar header_information;\nexport const HEADERS = {\n  \"Content-Type\": \"application/json\",\n  Accept: \"application/json\",\n};\nconst axiosInstance = axios.create({\n  baseURL: mainBaseurl,\n});\nasync function getCredentials() {\n  var token = await localStorage.getItem(\"token\");\n  var uid = await localStorage.getItem(\"uid\");\n  var client = await localStorage.getItem(\"client\");\n  return { token, uid };\n}\nasync function getheaderInformation() {\n  var token = await localStorage.getItem(\"token\");\n  var uid = await localStorage.getItem(\"uid\");\n  var client = await localStorage.getItem(\"client\");\n  return { token: token, uid: uid, client: client };\n}\naxiosInstance.interceptors.request.use(function (config) {\n  var headerInformation = getheaderInformation();\n  var { token, uid, client } = getCredentials();\n  config.headers = {\n    \"Content-Type\": \"application/json\",\n    \"access-token\": localStorage.getItem(\"token\"),\n    uid: localStorage.getItem(\"uid\"),\n    client: localStorage.getItem(\"client\"),\n  };\n  return config;\n});\naxiosInstance.interceptors.response.use(\n  (response) => {\n    if (response.status == 202) {\n      toast.success(response.data.message);\n    }\n    if (response.status == 200 && !_.isEmpty(response.data.message)) {\n      toast.success(response.data.message);\n    }\n    if (response.status == 200 && !_.isEmpty(response.data.error)) {\n      toast.error(response.data.error);\n    }\n    return response;\n  },\n  function (error) {\n    // Any status codes that falls outside the range of 2xx cause this function to trigger\n    // Do something with response error\n    // console.log(\"THIS IS ERROR\", error.response);\n    if (error.response.status == 400) {\n      toast.error(errorMessages(error.response.data));\n      // store.dispatch(logout())\n    }\n    if (error.response.status == 401) {\n      toast.error(errorMessages(error.response.data));\n      store.dispatch(logout());\n    }\n    if (error.response.status == 404) {\n      toast.error(errorMessages(error.response.data));\n      // store.dispatch(logout())\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport function errorMessages(errors) {\n  console.log(errors);\n  var string = [];\n  var keys = Object.keys(errors.errors);\n  errors = errors.errors;\n  keys.map((row, i) => {\n    console.log(\"THIS IS ROW\", row);\n    if (row == \"full_messages\") {\n      return false;\n    } else if (Number.isInteger(row)) {\n      string.push(<li>{errors[row]}</li>);\n    } else {\n      var new_row = row.replace(\"_\", \" \");\n      new_row = new_row.charAt(0).toUpperCase() + new_row.slice(1);\n      string.push(<li>{errors[row]}</li>);\n    }\n    return string;\n  });\n  return <ul>{string}</ul>;\n}\nconst mapStateToProps = (state) => {\n  return { user: state.authentication.user, token: state.authentication.token };\n};\nconst mapDispatchToProps = (dispatch) => ({\n  actions: bindActionCreators(actions, dispatch),\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(axiosInstance);\n"]},"metadata":{},"sourceType":"module"}