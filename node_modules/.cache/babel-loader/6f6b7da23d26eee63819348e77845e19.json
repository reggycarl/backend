{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/components/ProductConfigurations/ProductTax.jsx\";\nimport React, { Component } from 'react';\nimport { Card, CardTitle, CardBody, Row, Col, CardText, Form, FormGroup, Input, Label, FormText, Button } from 'reactstrap';\nimport Select from '../Controls/Select';\nimport moment from 'moment';\nimport axiosInstance, { baseurl } from '../misc/Axios';\nimport SubmitButton from '../Controls/SubmitButton';\nimport { Link } from 'react-router-dom';\nimport { getProductTaxGroups } from '../misc/functions';\nimport './product_taxes.scss';\nimport Dropzone from 'react-dropzone';\nimport NumberField from '../Controls/NumberField';\nexport default class ProductTax extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      product_tax: {\n        name: \"\",\n        description: '',\n        rate: 0\n      },\n      editing: false,\n      readOnly: this.props.match.params.id != \"\" && this.props.match.params.id != null,\n      product_tax_uuid: this.props.match.params.id,\n      existing_record: this.props.match.params.id != \"\" && this.props.match.params.id != null\n    };\n\n    this.onChange = e => {\n      console.log(e.target.name);\n      this.setState({ ...this.state,\n        product_tax: { ...this.state.product_tax,\n          [e.target.name]: e.target.value\n        }\n      });\n    };\n\n    this.handleChangeSelect = (selectedOption, val) => {\n      var state = { ...this.state,\n        product_tax: { ...this.state.product_tax,\n          [selectedOption]: val.value\n        },\n        [selectedOption]: val\n      };\n      this.setState({ ...state\n      });\n    };\n\n    this.onDateChanged = (momentdate, attr_name) => {\n      // console.log(\"ClassName is\", momentdate.constructor.name)\n      var new_date = new moment();\n\n      if (momentdate.constructor.name == new_date.constructor.name) {\n        var new_state = { ...this.state,\n          product_tax: { ...this.state.product_tax,\n            [attr_name]: momentdate\n          }\n        };\n        this.setState({ ...new_state\n        });\n      } else {\n        console.log(this.state.product_tax[attr_name]);\n        var date = new moment(this.state.product_tax[attr_name]);\n        var new_state = { ...this.state,\n          product_tax: { ...this.state.product_tax,\n            [attr_name]: date\n          }\n        };\n        this.setState({ ...new_state\n        });\n      }\n    };\n\n    this.setProductTaxes = (state, product_tax) => {\n      var new_state = { ...state,\n        product_tax: product_tax\n      };\n      return new_state;\n    };\n\n    this.onValueChange = (e, val) => {\n      console.log(val);\n      this.setState({ ...this.state,\n        product_tax: { ...this.state.product_tax,\n          [e]: val.floatValue\n        }\n      });\n    };\n\n    this.handleChangeSelect = (selectedOption, val) => {\n      var state = { ...this.state,\n        product_tax: { ...this.state.product_tax,\n          [selectedOption]: val.value\n        },\n        [selectedOption]: val\n      };\n      this.setState({ ...state\n      });\n    };\n\n    this.onDrop = (name, acceptedFiles) => {\n      console.log(name);\n      console.log(acceptedFiles);\n\n      if (this.state.readOnly != true) {\n        acceptedFiles.map((file, i) => {\n          var formData = new FormData();\n          formData.append(\"file\", file);\n          axiosInstance.post(\"/photos\", formData).then(response => {\n            this.setState({ ...this.state,\n              product_tax: { ...this.state.product_tax,\n                photo_id: response.data.photo.id,\n                photo: response.data.photo\n              }\n            });\n          });\n        });\n      }\n    };\n\n    this.componentDidMount = () => {\n      var self = this; // Promise.all([]).then(() => {\n\n      console.log(\"ID\", this.props.match.params.id);\n\n      if (self.state.existing_record == true) {\n        console.log(\"FECHING EXISTING RECORD\");\n        axiosInstance.get(`/admins/product_taxes/${this.state.product_tax_uuid}`).then(response => {\n          var new_state = { ...this.state,\n            existing_record: true,\n            readOnly: true\n          };\n          new_state = self.setProductTaxes(new_state, response.data.product_tax);\n          self.setState({ ...new_state\n          });\n        });\n      } else {\n        self.setState({ ...this.state\n        });\n      } // })\n\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      var self = this;\n\n      if (self.state.readOnly == true && self.state.existing_record == true) {\n        self.setState({ ...self.state,\n          readOnly: false\n        });\n      } else {\n        var instance;\n\n        if (self.state.existing_record != true) {\n          instance = axiosInstance.post('/admins/product_taxes', {\n            product_tax: this.state.product_tax\n          });\n        } else {\n          instance = axiosInstance.put(`/admins/product_taxes/${this.state.product_tax_id || this.state.product_tax.uuid}`, {\n            product_tax: this.state.product_tax\n          });\n        }\n\n        instance.then(response => {\n          console.log(\"RESPONSE\", response); // console.log(\"Setting state\")\n\n          if (this.state.existing_record == true) {\n            var new_state = this.setProductTaxes(this.state, response.data.product_tax);\n            console.log(\"THIS IS NEW STATE\", new_state);\n            this.setState({ ...new_state,\n              readOnly: true\n            });\n          } else {\n            this.props.history.push(`/product_configurations/product_taxes/${response.data.product_tax.uuid}`); // this.setState({ ...this.state, readOnly: true, existing_record: true, editing: false })\n          }\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, \"ProductTax\", /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"btn btn-success btn-sm\",\n      to: \"/product_configurations/product_taxes/new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 33\n      }\n    }, \"New ProductTax\")))), /*#__PURE__*/React.createElement(CardText, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 45\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      name: \"name\",\n      value: this.state.product_tax.name,\n      placeholder: \"ProductTax Name\",\n      onChange: this.onChange,\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 45\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"exampleEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 23\n      }\n    }, \"Rate\"), /*#__PURE__*/React.createElement(NumberField, {\n      name: \"rate\",\n      thousandSeparator: true,\n      displayType: \"input\",\n      className: \"right\",\n      value: this.state.product_tax.rate,\n      onValueChange: this.onValueChange.bind(this, \"rate\"),\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 52\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 56\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"textarea\",\n      rows: 5,\n      name: \"description\",\n      value: this.state.product_tax.description,\n      placeholder: \"ProductTax Description\",\n      onChange: this.onChange,\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 56\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 41\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(SubmitButton, {\n      onClick: this.onSubmit,\n      readOnly: this.state.readOnly,\n      editing: this.state.editing,\n      existing_record: this.state.existing_record,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 41\n      }\n    })))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/components/ProductConfigurations/ProductTax.jsx"],"names":["React","Component","Card","CardTitle","CardBody","Row","Col","CardText","Form","FormGroup","Input","Label","FormText","Button","Select","moment","axiosInstance","baseurl","SubmitButton","Link","getProductTaxGroups","Dropzone","NumberField","ProductTax","state","product_tax","name","description","rate","editing","readOnly","props","match","params","id","product_tax_uuid","existing_record","onChange","e","console","log","target","setState","value","handleChangeSelect","selectedOption","val","onDateChanged","momentdate","attr_name","new_date","constructor","new_state","date","setProductTaxes","onValueChange","floatValue","onDrop","acceptedFiles","map","file","i","formData","FormData","append","post","then","response","photo_id","data","photo","componentDidMount","self","get","onSubmit","preventDefault","instance","put","product_tax_id","uuid","history","push","render","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Card, CardTitle, CardBody, Row, Col, CardText, Form, FormGroup, Input, Label, FormText, Button } from 'reactstrap'\nimport Select from '../Controls/Select'\n\n\nimport moment from 'moment';\nimport axiosInstance, { baseurl } from '../misc/Axios'\nimport SubmitButton from '../Controls/SubmitButton'\nimport {Link} from 'react-router-dom'\nimport {  getProductTaxGroups } from '../misc/functions'\nimport './product_taxes.scss'\nimport Dropzone from 'react-dropzone';\nimport NumberField from '../Controls/NumberField';\nexport default class ProductTax extends Component {\n    state = {\n        product_tax: {\n            name: \"\",\n            description: '',\n            rate: 0\n        },\n        editing: false,\n        readOnly: this.props.match.params.id != \"\" && this.props.match.params.id != null,\n        product_tax_uuid: this.props.match.params.id,\n        existing_record: this.props.match.params.id != \"\" && this.props.match.params.id != null,\n    }\n    onChange = e => {\n        console.log(e.target.name)\n        this.setState({\n            ...this.state,\n            product_tax: {\n                ...this.state.product_tax,\n                [e.target.name]: e.target.value\n            }\n        }\n        )\n    }\n    handleChangeSelect = (selectedOption, val) => {\n        var state = {\n            ...this.state,\n            product_tax: {\n                ...this.state.product_tax,\n                [selectedOption]: val.value\n            },\n            [selectedOption]: val\n        }\n        this.setState({ ...state })\n    }\n    onDateChanged = (momentdate, attr_name) => {\n        // console.log(\"ClassName is\", momentdate.constructor.name)\n        var new_date = new moment();\n        if (momentdate.constructor.name == new_date.constructor.name) {\n            var new_state = {\n                ...this.state,\n                product_tax: {\n                    ...this.state.product_tax,\n                    [attr_name]: momentdate,\n                }\n            };\n            this.setState({ ...new_state });\n        }\n        else {\n            console.log(this.state.product_tax[attr_name])\n            var date = new moment(this.state.product_tax[attr_name])\n            var new_state = {\n                ...this.state,\n                product_tax: {\n                    ...this.state.product_tax,\n                    [attr_name]: date,\n\n                }\n            };\n            this.setState({ ...new_state });\n        }\n    }\n\n    setProductTaxes = (state, product_tax) => {\n        \n        var new_state = {\n            ...state,\n            product_tax: product_tax,\n          \n            \n        }\n        return new_state;\n    }\n    onValueChange = (e, val)=>{\n        console.log(val);\n        \n        this.setState({\n            ...this.state,\n            product_tax: {\n                ...this.state.product_tax,\n                [e]: val.floatValue\n            }\n        })\n    }\n    handleChangeSelect = (selectedOption, val) => {\n        var state = {\n            ...this.state,\n            product_tax: {\n                ...this.state.product_tax,\n                [selectedOption]: val.value\n            },\n            [selectedOption]: val\n        }\n        this.setState({ ...state })\n    }\n    onDrop = (name, acceptedFiles) => {\n        console.log(name);\n        console.log(acceptedFiles);\n        if (this.state.readOnly != true) {\n            acceptedFiles.map((file, i) => {\n                var formData = new FormData();\n                formData.append(\"file\", file)\n                axiosInstance.post(\"/photos\", formData).then(response => {\n                    this.setState({\n                        ...this.state,\n                        product_tax: {\n                            ...this.state.product_tax,\n                            photo_id:  response.data.photo.id,\n                            photo: response.data.photo\n                        }\n                    })\n                })\n            })\n        }\n    }\n    componentDidMount = () => {\n        var self = this\n        \n        // Promise.all([]).then(() => {\n            console.log(\"ID\", this.props.match.params.id)\n            if (self.state.existing_record == true) {\n                console.log(\"FECHING EXISTING RECORD\")\n                axiosInstance.get(`/admins/product_taxes/${this.state.product_tax_uuid}`).then((response) => {\n                    var new_state = {\n                        ...this.state,\n                        existing_record: true,\n                        readOnly: true,\n                        \n                        \n                        \n                    }\n                    new_state = self.setProductTaxes(new_state, response.data.product_tax)\n                    self.setState({ ...new_state })\n                })\n            }\n            else {\n                self.setState({\n                    ...this.state,\n                    \n                    \n                })\n            }\n\n        // })\n    }\n\n    onSubmit = e => {\n        e.preventDefault();\n        var self = this;\n        if (self.state.readOnly == true && self.state.existing_record == true) {\n            self.setState({\n                ...self.state,\n                readOnly: false\n            })\n        }\n\n        else {\n            var instance;\n            if (self.state.existing_record != true) {\n                instance = axiosInstance.post('/admins/product_taxes', { product_tax: this.state.product_tax })\n            }\n            else {\n                \n                instance = axiosInstance.put(`/admins/product_taxes/${this.state.product_tax_id || this.state.product_tax.uuid}`, { product_tax: this.state.product_tax })\n            }\n\n            instance.then((response) => {\n                console.log(\"RESPONSE\", response)\n\n                // console.log(\"Setting state\")\n                if (this.state.existing_record == true) {\n                    var new_state = this.setProductTaxes(this.state, response.data.product_tax)\n                    console.log(\"THIS IS NEW STATE\", new_state)\n                    this.setState({ ...new_state, readOnly: true })\n                }\n                else {\n                    this.props.history.push(`/product_configurations/product_taxes/${response.data.product_tax.uuid}`)\n                    // this.setState({ ...this.state, readOnly: true, existing_record: true, editing: false })\n                }\n\n\n            })\n        }\n    }\n\n\n    render() {\n        return (\n            <Col md={12}>\n                <Card>\n\n                    <CardBody>\n                        <CardTitle className='col-md-12'>ProductTax\n                        <ul>\n                            <li><Link className='btn btn-success btn-sm' to='/product_configurations/product_taxes/new'>New ProductTax</Link></li>\n                        </ul></CardTitle>\n                        <CardText className='col-md-12'>\n                            <Form className='row'>\n                                <Col md={12}>\n                                    \n                                <Row>\n                                \n                                                    <Col md={12}>\n                                                    <Row>\n                                                   \n                                        <FormGroup className='col-md-4'>\n                                            <Label for=\"name\">Name</Label>\n                                            <Input type=\"text\" name=\"name\" value={this.state.product_tax.name} placeholder=\"ProductTax Name\" onChange={this.onChange} readOnly={this.state.readOnly} /> \n                                        </FormGroup>\n                                        </Row>\n                                        <Row>\n                                                   \n                                        <FormGroup className=\"col-md-2\">\n                      <Label for=\"exampleEmail\">Rate</Label>\n                      <NumberField\n                        name=\"rate\"\n                        thousandSeparator={true}\n                        displayType={\"input\"}\n                        className={\"right\"}\n                        value={this.state.product_tax.rate}\n                        onValueChange={this.onValueChange.bind(\n                          this,\n                          \"rate\"\n                        )}\n                        readOnly={this.state.readOnly}\n                      />\n                      \n                    </FormGroup>\n                    </Row>\n                      <Row>\n                                                   \n                                                   <FormGroup className='col-md-12'>\n                                                       <Label for=\"name\">Description</Label>\n                                                       <Input type=\"textarea\" rows={5} name=\"description\" value={this.state.product_tax.description} placeholder=\"ProductTax Description\" onChange={this.onChange} readOnly={this.state.readOnly} /> \n                                                   </FormGroup>\n                                                   </Row>\n                                        <Row>\n                                        \n                                        </Row>\n                                                    </Col>\n                \n                  </Row>\n                                \n                                    <Row>\n                                        \n                                        \n                                    </Row>\n                                </Col>\n\n                                <Col md={12}>\n                                    {/* <Row> */}\n                                        <SubmitButton onClick={this.onSubmit} readOnly={this.state.readOnly} editing={this.state.editing} existing_record={this.state.existing_record} />\n                                    {/* </Row> */}\n                                </Col>\n                            </Form>\n                        </CardText>\n                    </CardBody>\n                </Card>\n            </Col>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}