{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/lib/ReactWillPaginateTable/index.jsx\";\nimport React, { Component } from \"react\";\nimport { Col, Input, Row, Button, Container } from \"reactstrap\";\nimport \"./index.scss\";\nimport _ from \"lodash\";\nimport qs from \"query-string\";\nimport NumberField from \"../../components/Controls/NumberField\";\nimport { formatDate } from \"../../components/misc/functions\";\nimport InputGroup from \"reactstrap/lib/InputGroup\";\nimport Pagination from \"react-js-pagination\";\nimport ExcelExport from \"./ExcelExport\";\nexport default class ReactWillPaginateTable extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      downloadData: [],\n      endpoint: this.props.endpoint,\n      per_page: this.props.per_page || 20,\n      page: this.props.page || 1,\n      search_string: \"\",\n      new_params: \"\"\n    };\n\n    this.componentDidMount = () => {\n      console.log(\"THIS IS STATUS OF LINK\", this.props.disable_link); // this.populateDownloadData();\n\n      this.populate();\n    };\n\n    this.populate = () => {};\n\n    this.sendAction = (e, action, obj) => {\n      e.preventDefault();\n      e.stopPropagation(); // alert(`Visting ${action.url}`);\n\n      var new_action = action.url.replace(\":uuid\", obj.uuid);\n      this.props.axiosInstance.post(new_action).then(response => {\n        if (response.status == 202) {\n          var state_data = [...this.state.data];\n\n          var current_data_index = _.findIndex(state_data, cur_obj => {\n            return cur_obj.uuid == obj.uuid;\n          });\n\n          state_data[current_data_index] = response.data.data;\n          console.log(\"THIS IS THE CURRENT DATA\", current_data_index);\n          this.setState({ ...this.state,\n            data: [...state_data]\n          });\n        }\n      });\n    };\n\n    this.search = e => {\n      this.setState({ ...this.state,\n        page: 1,\n        loading: true\n      });\n      this.props.history.push(`${this.props.link_endpoint || this.props.endpoint}?page=1&per_page=${this.state.per_page}&search_string=${this.state.search_string}`);\n    };\n\n    this.inputChanged = e => {\n      console.log(e.target.name);\n      this.setState({ ...this.state,\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.navigateTo = page => {\n      var params = qs.parse(this.props.location ? this.props.location.search : \" \");\n      console.log(\"THESE ARE QUERY\", params);\n      console.log(\"NAVIGATING>>>\");\n\n      if (this.props.disable_link == true) {\n        return true;\n      } else {\n        console.log(page);\n        this.setState({ ...this.state,\n          loading: true\n        });\n        var search_string = \"\";\n\n        if (this.state.search_string == \"undefined\" || this.state.search_string == null) {\n          search_string = \"\";\n        } else {\n          search_string = this.state.search_string;\n        }\n\n        var link = `${this.props.link_endpoint || this.props.endpoint}?page=${page}&per_page=${this.state.per_page}&search_string=${search_string}${this.props.options ? this.props.options : \"\"}`;\n\n        if (params) {\n          Object.keys(params).forEach(key => {\n            if (key == \"type\") {\n              link += `&${key}=${params[key]}`;\n            }\n          });\n        }\n\n        this.props.history.push(link);\n      }\n    };\n  }\n\n  capitalizeFirstLetter(string) {\n    // return string\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      className: \"form-control searchTextBox\",\n      name: \"search_string\",\n      value: this.state.search_string,\n      placeholder: \"Search for...\",\n      \"aria-label\": \"Search Terms\",\n      \"aria-describedby\": \"searchButton\",\n      onChange: this.inputChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"input-group-append\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"  full-width\",\n      color: \"primary\",\n      type: \"button\",\n      id: \"searchButton\",\n      onClick: this.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, \"Search\"))))), /*#__PURE__*/React.createElement(Col, {\n      md: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-striped table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }, \"#\"), this.props.columns.map(d => {\n      var name = d.name.replace(/_/g, \" \");\n      name = this.capitalizeFirstLetter(name);\n      return /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 26\n        }\n      }, name);\n    }), this.props.actions && this.props.actions.length > 0 ? /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 19\n      }\n    }, \"Actions\") : \"\")), this.state.loading ? /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"loadingTD\",\n      colSpan: this.props.columns.length + 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, \"Loading\")) : this.state.data.length > 0 ? /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }, this.state.data.map((row, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        onClick: e => {\n          e.preventDefault();\n\n          if (!this.props.disable_link) {\n            var _this$props$link_endp;\n\n            this.props.history.push(`${(_this$props$link_endp = this.props.link_endpoint) !== null && _this$props$link_endp !== void 0 ? _this$props$link_endp : this.props.endpoint}/${row.uuid}`);\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 23\n        }\n      }, (this.state.page - 1) * this.state.per_page + index + 1), this.props.columns.map(col => {\n        var data;\n\n        if (col.number == true) {\n          data = data = /*#__PURE__*/React.createElement(\"td\", {\n            className: \"right\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(NumberField, {\n            value: row[col.name],\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 31\n            }\n          }));\n        } else if (col.boolean == true) {\n          data = /*#__PURE__*/React.createElement(\"td\", {\n            className: \"\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 29\n            }\n          }, row[col.field || col.name] ? col.options[0] : col.options[1]);\n        } else if (col.date == true) {\n          data = /*#__PURE__*/React.createElement(\"td\", {\n            className: \"\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }\n          }, formatDate(row[col.field || col.name]));\n        } else {\n          data = /*#__PURE__*/React.createElement(\"td\", {\n            className: \"\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }\n          }, row[col.field || col.name]);\n        }\n\n        return data;\n      }), this.props.actions && this.props.actions.length > 0 ? /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 25\n        }\n      }, \" \", this.props.actions.map(action => {\n        console.log(\"THIS IS ACTIVE\", row);\n        console.log(\"THIS IS ACTIVE PARAMS\", action.active_param);\n        return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"a\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 33\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          className: `btn btn-${action.color || \"primary\"} btn-sm`,\n          disabled: row[action.active_param],\n          onClick: e => {\n            this.sendAction(e, action, row);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 33\n          }\n        }, action.name, \" \"), \" \", \"\\xA0\", \" \");\n      })) : \"\");\n    })) : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: this.props.columns.length + 2,\n      className: \"centered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    }, \"No Data to Display\"))))), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Pagination, {\n      activePage: this.state.page || 1,\n      itemsCountPerPage: this.state.per_page || 20,\n      totalItemsCount: this.state.size,\n      pageRangeDisplayed: 6,\n      itemClass: \"btn btn-success\",\n      innerClass: \"btn-group btn-group-toggle special pagination\",\n      onChange: this.navigateTo.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ExcelExport, Object.assign({}, this.props, {\n      additional_params: this.props.additional_params,\n      columns: this.props.columns,\n      axiosInstance: this.props.axiosInstance,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/lib/ReactWillPaginateTable/index.jsx"],"names":["React","Component","Col","Input","Row","Button","Container","_","qs","NumberField","formatDate","InputGroup","Pagination","ExcelExport","ReactWillPaginateTable","state","data","downloadData","endpoint","props","per_page","page","search_string","new_params","componentDidMount","console","log","disable_link","populate","sendAction","e","action","obj","preventDefault","stopPropagation","new_action","url","replace","uuid","axiosInstance","post","then","response","status","state_data","current_data_index","findIndex","cur_obj","setState","search","loading","history","push","link_endpoint","inputChanged","target","name","value","navigateTo","params","parse","location","link","options","Object","keys","forEach","key","capitalizeFirstLetter","string","charAt","toUpperCase","slice","render","columns","map","d","actions","length","row","index","col","number","boolean","field","date","active_param","color","size","bind","additional_params"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Col, Input, Row, Button, Container } from \"reactstrap\";\nimport \"./index.scss\";\nimport _ from \"lodash\";\nimport qs from \"query-string\";\nimport NumberField from \"../../components/Controls/NumberField\";\nimport { formatDate } from \"../../components/misc/functions\";\nimport InputGroup from \"reactstrap/lib/InputGroup\";\nimport Pagination from \"react-js-pagination\";\n\nimport ExcelExport from \"./ExcelExport\";\n\nexport default class ReactWillPaginateTable extends Component {\n  state = {\n    data: [],\n    downloadData: [],\n    endpoint: this.props.endpoint,\n    per_page: this.props.per_page || 20,\n    page: this.props.page || 1,\n    search_string: \"\",\n    new_params: \"\",\n  };\n  // populateDownloadData = () => {\n  //   var params = qs.parse(this.props.location.search || {});\n  //   console.log(\"Populating download data\");\n  //   var new_params = this.props.location.search.replace(\"?\", \"\");\n  //   var search_string =\n  //     params.search_string != \"undefined\" && params.search_string != undefined\n  //       ? params.search_string\n  //       : \"\";\n  //   this.props.axiosInstance\n  //     .get(\n  //       this.props.endpoint +\n  //         `?search_string=${search_string}&all=true&${this.props.additional_params}&${new_params}`\n  //     )\n  //     .then((response) => {\n  //       console.log(\"THIS IS RESPONSE FON SERVER\", response);\n\n  //       if (response.status == 200) {\n  //         console.log(\"Populating and setting state download data\");\n  //         this.setState({\n  //           ...this.state,\n  //           downloadData: response.data.data,\n  //         });\n  //       }\n  //     });\n  // };\n  componentDidMount = () => {\n    console.log(\"THIS IS STATUS OF LINK\", this.props.disable_link);\n    // this.populateDownloadData();\n    this.populate();\n  };\n\n  populate = () => {\n\n  };\n\n  sendAction = (e, action, obj) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // alert(`Visting ${action.url}`);\n    var new_action = action.url.replace(\":uuid\", obj.uuid);\n\n    this.props.axiosInstance.post(new_action).then((response) => {\n      if (response.status == 202) {\n        var state_data = [...this.state.data];\n\n        var current_data_index = _.findIndex(state_data, (cur_obj) => {\n          return cur_obj.uuid == obj.uuid;\n        });\n        state_data[current_data_index] = response.data.data;\n        console.log(\"THIS IS THE CURRENT DATA\", current_data_index);\n        this.setState({\n          ...this.state,\n          data: [...state_data],\n        });\n      }\n    });\n  };\n\n  capitalizeFirstLetter(string) {\n    // return string\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  search = (e) => {\n    this.setState({\n      ...this.state,\n      page: 1,\n      loading: true,\n    });\n    this.props.history.push(\n      `${this.props.link_endpoint || this.props.endpoint}?page=1&per_page=${\n        this.state.per_page\n      }&search_string=${this.state.search_string}`\n    );\n  };\n  inputChanged = (e) => {\n    console.log(e.target.name);\n    this.setState({\n      ...this.state,\n      [e.target.name]: e.target.value,\n    });\n  };\n  navigateTo = (page) => {\n    var params = qs.parse(\n      this.props.location ? this.props.location.search : \" \"\n    );\n    console.log(\"THESE ARE QUERY\", params);\n    console.log(\"NAVIGATING>>>\");\n    if (this.props.disable_link == true) {\n      return true;\n    } else {\n      console.log(page);\n      this.setState({\n        ...this.state,\n        loading: true,\n      });\n      var search_string = \"\";\n      if (\n        this.state.search_string == \"undefined\" ||\n        this.state.search_string == null\n      ) {\n        search_string = \"\";\n      } else {\n        search_string = this.state.search_string;\n      }\n      var link = `${\n        this.props.link_endpoint || this.props.endpoint\n      }?page=${page}&per_page=${\n        this.state.per_page\n      }&search_string=${search_string}${\n        this.props.options ? this.props.options : \"\"\n      }`;\n      if (params) {\n        Object.keys(params).forEach((key) => {\n          if (key == \"type\") {\n            link += `&${key}=${params[key]}`;\n          }\n        });\n      }\n      this.props.history.push(link);\n    }\n  };\n  render() {\n    return (\n      <React.Fragment>\n        <Col>\n          <Row>\n            <Col md={12}>\n              <form onSubmit={this.search}>\n                <InputGroup>\n                  <Input\n                    type=\"text\"\n                    className=\"form-control searchTextBox\"\n                    name=\"search_string\"\n                    value={this.state.search_string}\n                    placeholder=\"Search for...\"\n                    aria-label=\"Search Terms\"\n                    aria-describedby=\"searchButton\"\n                    onChange={this.inputChanged}\n                  />\n                  <div class=\"input-group-append\">\n                    <Button\n                      className=\"  full-width\"\n                      color=\"primary\"\n                      type=\"button\"\n                      id=\"searchButton\"\n                      onClick={this.search}\n                    >\n                      Search\n                    </Button>\n                  </div>\n                </InputGroup>\n              </form>\n            </Col>\n            <Col md={1}></Col>\n          </Row>\n        </Col>\n        <Col md={12}>\n          <table className=\"table table-bordered table-striped table-hover\">\n            <thead className=\"thead-light\">\n              <tr>\n                <th>#</th>\n                {this.props.columns.map((d) => {\n                  var name = d.name.replace(/_/g, \" \");\n                  name = this.capitalizeFirstLetter(name);\n                  return <th>{name}</th>;\n                })}\n                {this.props.actions && this.props.actions.length > 0 ? (\n                  <th>Actions</th>\n                ) : (\n                  \"\"\n                )}\n              </tr>\n            </thead>\n            {this.state.loading ? (\n              <tr>\n                <td\n                  className=\"loadingTD\"\n                  colSpan={this.props.columns.length + 2}\n                >\n                  Loading\n                </td>\n              </tr>\n            ) : this.state.data.length > 0 ? (\n              <tbody>\n                {this.state.data.map((row, index) => {\n                  return (\n                    <tr\n                      onClick={(e) => {\n                        e.preventDefault();\n                        if (!this.props.disable_link) {\n                          this.props.history.push(\n                            `${\n                              this.props.link_endpoint ?? this.props.endpoint\n                            }/${row.uuid}`\n                          );\n                        }\n                      }}\n                    >\n                      <td>\n                        {(this.state.page - 1) * this.state.per_page +\n                          index +\n                          1}\n                      </td>\n                      {this.props.columns.map((col) => {\n                        var data;\n                        if (col.number == true) {\n                          data = data = (\n                            <td className={\"right\"}>\n                              <NumberField value={row[col.name]} />\n                            </td>\n                          );\n                        } else if (col.boolean == true) {\n                          data = (\n                            <td className={\"\"}>\n                              {row[col.field || col.name]\n                                ? col.options[0]\n                                : col.options[1]}\n                            </td>\n                          );\n                        } else if (col.date == true) {\n                          data = (\n                            <td className={\"\"}>\n                              {formatDate(row[col.field || col.name])}\n                            </td>\n                          );\n                        } else {\n                          data = (\n                            <td className={\"\"}>{row[col.field || col.name]}</td>\n                          );\n                        }\n\n                        return data;\n                      })}\n                      {this.props.actions && this.props.actions.length > 0 ? (\n                        <td>\n                          {\" \"}\n                          {this.props.actions.map((action) => {\n                            console.log(\"THIS IS ACTIVE\", row);\n                            console.log(\n                              \"THIS IS ACTIVE PARAMS\",\n                              action.active_param\n                            );\n                            return (\n                              <>\n                                <a></a>\n                                <button\n                                  className={`btn btn-${\n                                    action.color || \"primary\"\n                                  } btn-sm`}\n                                  disabled={row[action.active_param]}\n                                  onClick={(e) => {\n                                    this.sendAction(e, action, row);\n                                  }}\n                                >\n                                  {action.name}{\" \"}\n                                </button>{\" \"}\n                                &nbsp;{\" \"}\n                              </>\n                            );\n                          })}\n                        </td>\n                      ) : (\n                        \"\"\n                      )}\n                    </tr>\n                  );\n                })}\n              </tbody>\n            ) : (\n              <tr>\n                <td\n                  colSpan={this.props.columns.length + 2}\n                  className=\"centered\"\n                >\n                  <b>No Data to Display</b>\n                </td>\n              </tr>\n            )}\n          </table>\n        </Col>\n        <Col>\n          <Pagination\n            activePage={this.state.page || 1}\n            itemsCountPerPage={this.state.per_page || 20}\n            totalItemsCount={this.state.size}\n            pageRangeDisplayed={6}\n            itemClass=\"btn btn-success\"\n            innerClass=\"btn-group btn-group-toggle special pagination\"\n            onChange={this.navigateTo.bind(this)}\n          />\n        </Col>\n\n        <Col>\n          <ExcelExport\n            {...this.props}\n            additional_params={this.props.additional_params}\n            columns={this.props.columns}\n            axiosInstance={this.props.axiosInstance}\n          />\n        </Col>\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}