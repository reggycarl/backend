{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/components/Reports/KeyMetrics.jsx\";\nimport React, { Component } from \"react\";\nimport { Col, Card, CardBody, CardTitle, CardText } from \"reactstrap\";\nimport ReactWillPaginateTable from \"../../lib/ReactWillPaginateTable\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport axiosInstance from \"../misc/Axios\";\nimport * as actions from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport { bindActionCreators } from \"redux\";\nimport Table from \"reactstrap/lib/Table\";\nimport NumberField from \"../Controls/NumberField\";\nimport ReportFilterWidget from \"../ReportFilterWidget/ReportFilterWidget\";\n\nclass KeyMetrics extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      start_date: new moment(),\n      end_date: new moment()\n    };\n\n    this.componentDidMount = () => {\n      this.populate();\n    };\n\n    this.run = e => {\n      e.preventDefault();\n      this.populate();\n    };\n\n    this.populate = () => {\n      axiosInstance.get(`/admins/reports/key_metrics?start_date=${this.state.start_date.format(\"YYYY-MM-DD\")}&end_date=${this.state.end_date.format(\"YYYY-MM-DD\")}`).then(response => {\n        console.log(\"THIS IS RESPONSE FON SERVER\", response);\n\n        if (response.status == 200) {\n          this.setState({ ...this.state,\n            data: response.data.data\n          });\n        }\n      });\n    };\n\n    this.onDateChanged = (attr_name, momentdate) => {\n      console.log(\"THIS IS DATE\", momentdate);\n      console.log(\"THIS IS ATTR NAME\", attr_name);\n      var new_date = new moment();\n\n      if (momentdate.constructor.name == new_date.constructor.name) {\n        var new_state = { ...this.state,\n          [attr_name]: momentdate\n        };\n        this.setState({ ...new_state\n        });\n      } else {\n        console.log(this.state[attr_name]);\n        var date = new moment(this.state[attr_name]);\n        var new_state = { ...this.state,\n          [attr_name]: date\n        };\n        this.setState({ ...new_state\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"Key Metrics\", /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, this.props.authentication.default_path == \"/key_metrics/\" ? /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 19\n      }\n    }) : \"\")), /*#__PURE__*/React.createElement(CardText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ReportFilterWidget, {\n      run: this.run,\n      onDateChanged: this.onDateChanged,\n      start_date: this.state.start_date,\n      end_date: this.state.end_date,\n      detailed: this.state.detailed,\n      handleChangeToggle: this.handleChangeToggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, \"Metric\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, \"Value\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, this.state.data.map(data => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }\n      }, data.name), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(NumberField, {\n        value: data.value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 27\n        }\n      })));\n    }), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  authentication: state.authentication\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(actions, dispatch)\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(KeyMetrics));","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/components/Reports/KeyMetrics.jsx"],"names":["React","Component","Col","Card","CardBody","CardTitle","CardText","ReactWillPaginateTable","Link","withRouter","axiosInstance","actions","connect","moment","_","bindActionCreators","Table","NumberField","ReportFilterWidget","KeyMetrics","state","data","start_date","end_date","componentDidMount","populate","run","e","preventDefault","get","format","then","response","console","log","status","setState","onDateChanged","attr_name","momentdate","new_date","constructor","name","new_state","date","render","props","authentication","default_path","detailed","handleChangeToggle","map","value","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Col, Card, CardBody, CardTitle, CardText } from \"reactstrap\";\nimport ReactWillPaginateTable from \"../../lib/ReactWillPaginateTable\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport axiosInstance from \"../misc/Axios\";\nimport * as actions from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\n\nimport { bindActionCreators } from \"redux\";\nimport Table from \"reactstrap/lib/Table\";\nimport NumberField from \"../Controls/NumberField\";\nimport ReportFilterWidget from \"../ReportFilterWidget/ReportFilterWidget\";\nclass KeyMetrics extends Component {\n  state = {\n    data: [],\n    start_date: new moment(),\n    end_date: new moment(),\n  };\n\n  componentDidMount = () => {\n    this.populate();\n  };\n  run = (e) => {\n    e.preventDefault();\n    this.populate();\n  };\n  populate = () => {\n    axiosInstance\n      .get(\n        `/admins/reports/key_metrics?start_date=${this.state.start_date.format(\n          \"YYYY-MM-DD\"\n        )}&end_date=${this.state.end_date.format(\"YYYY-MM-DD\")}`\n      )\n      .then((response) => {\n        console.log(\"THIS IS RESPONSE FON SERVER\", response);\n        if (response.status == 200) {\n          this.setState({\n            ...this.state,\n            data: response.data.data,\n          });\n        }\n      });\n  };\n  onDateChanged = (attr_name, momentdate) => {\n    console.log(\"THIS IS DATE\", momentdate);\n    console.log(\"THIS IS ATTR NAME\", attr_name);\n    var new_date = new moment();\n    if (momentdate.constructor.name == new_date.constructor.name) {\n      var new_state = {\n        ...this.state,\n        [attr_name]: momentdate,\n      };\n      this.setState({ ...new_state });\n    } else {\n      console.log(this.state[attr_name]);\n      var date = new moment(this.state[attr_name]);\n      var new_state = {\n        ...this.state,\n        [attr_name]: date,\n      };\n      this.setState({ ...new_state });\n    }\n  };\n\n  render() {\n    return (\n      <Col md={12}>\n        <Card>\n          <CardBody>\n            <CardTitle>\n              Key Metrics\n              <ul>\n                {this.props.authentication.default_path == \"/key_metrics/\" ? (\n                  <li></li>\n                ) : (\n                  \"\"\n                )}\n              </ul>\n            </CardTitle>\n            <CardText>\n              <ReportFilterWidget\n                run={this.run}\n                onDateChanged={this.onDateChanged}\n                start_date={this.state.start_date}\n                end_date={this.state.end_date}\n                detailed={this.state.detailed}\n                handleChangeToggle={this.handleChangeToggle}\n              />\n              <Table striped={true} bordered={true}>\n                <thead>\n                  <tr>\n                    <th>Metric</th>\n                    <th>Value</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {this.state.data.map((data) => {\n                    return (\n                      <tr>\n                        <td>{data.name}</td>\n                        <td className=\"right\">\n                          <NumberField value={data.value} />\n                        </td>\n                      </tr>\n                    );\n                  })}\n                  <tr></tr>\n                </tbody>\n              </Table>\n            </CardText>\n          </CardBody>\n        </Card>\n      </Col>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({ authentication: state.authentication });\nconst mapDispatchToProps = (dispatch) => ({\n  actions: bindActionCreators(actions, dispatch),\n});\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(KeyMetrics)\n);\n"]},"metadata":{},"sourceType":"module"}