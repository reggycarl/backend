{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/components/ProductConfigurations/ProductTag.jsx\";\nimport React, { Component } from \"react\";\nimport { Card, CardTitle, CardBody, Row, Col, CardText, Form, FormGroup, Input, Label, FormText, Button } from \"reactstrap\";\nimport Select from \"../Controls/Select\";\nimport moment from \"moment\";\nimport axiosInstance, { baseurl } from \"../misc/Axios\";\nimport SubmitButton from \"../Controls/SubmitButton\";\nimport { Link } from \"react-router-dom\";\nimport { getProductTagGroups } from \"../misc/functions\";\nimport Dropzone from \"react-dropzone\";\nimport NumberField from \"../Controls/NumberField\";\nexport default class ProductTag extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      product_tag: {\n        name: \"\",\n        description: \"\",\n        rate: 0\n      },\n      editing: false,\n      readOnly: this.props.match.params.id != \"\" && this.props.match.params.id != null,\n      product_tag_uuid: this.props.match.params.id,\n      existing_record: this.props.match.params.id != \"\" && this.props.match.params.id != null\n    };\n\n    this.onChange = e => {\n      console.log(e.target.name);\n      this.setState({ ...this.state,\n        product_tag: { ...this.state.product_tag,\n          [e.target.name]: e.target.value\n        }\n      });\n    };\n\n    this.handleChangeSelect = (selectedOption, val) => {\n      var state = { ...this.state,\n        product_tag: { ...this.state.product_tag,\n          [selectedOption]: val.value\n        },\n        [selectedOption]: val\n      };\n      this.setState({ ...state\n      });\n    };\n\n    this.onDateChanged = (momentdate, attr_name) => {\n      // console.log(\"ClassName is\", momentdate.constructor.name)\n      var new_date = new moment();\n\n      if (momentdate.constructor.name == new_date.constructor.name) {\n        var new_state = { ...this.state,\n          product_tag: { ...this.state.product_tag,\n            [attr_name]: momentdate\n          }\n        };\n        this.setState({ ...new_state\n        });\n      } else {\n        console.log(this.state.product_tag[attr_name]);\n        var date = new moment(this.state.product_tag[attr_name]);\n        var new_state = { ...this.state,\n          product_tag: { ...this.state.product_tag,\n            [attr_name]: date\n          }\n        };\n        this.setState({ ...new_state\n        });\n      }\n    };\n\n    this.setProductTages = (state, product_tag) => {\n      var new_state = { ...state,\n        product_tag: product_tag\n      };\n      return new_state;\n    };\n\n    this.onValueChange = (e, val) => {\n      console.log(val);\n      this.setState({ ...this.state,\n        product_tag: { ...this.state.product_tag,\n          [e]: val.floatValue\n        }\n      });\n    };\n\n    this.componentDidMount = () => {\n      var self = this; // Promise.all([]).then(() => {\n\n      console.log(\"ID\", this.props.match.params.id);\n\n      if (self.state.existing_record == true) {\n        console.log(\"FECHING EXISTING RECORD\");\n        axiosInstance.get(`/admins/product_tags/${this.state.product_tag_uuid}`).then(response => {\n          var new_state = { ...this.state,\n            existing_record: true,\n            readOnly: true\n          };\n          new_state = self.setProductTages(new_state, response.data.product_tag);\n          self.setState({ ...new_state\n          });\n        });\n      } else {\n        self.setState({ ...this.state\n        });\n      } // })\n\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      var self = this;\n\n      if (self.state.readOnly == true && self.state.existing_record == true) {\n        self.setState({ ...self.state,\n          readOnly: false\n        });\n      } else {\n        var instance;\n\n        if (self.state.existing_record != true) {\n          instance = axiosInstance.post(\"/admins/product_tags\", {\n            product_tag: this.state.product_tag\n          });\n        } else {\n          instance = axiosInstance.put(`/admins/product_tags/${this.state.product_tag_id || this.state.product_tag.uuid}`, {\n            product_tag: this.state.product_tag\n          });\n        }\n\n        instance.then(response => {\n          console.log(\"RESPONSE\", response); // console.log(\"Setting state\")\n\n          if (this.state.existing_record == true) {\n            var new_state = this.setProductTages(this.state, response.data.product_tag);\n            console.log(\"THIS IS NEW STATE\", new_state);\n            this.setState({ ...new_state,\n              readOnly: true\n            });\n          } else {\n            this.props.history.push(`/product_configurations/product_tags/${response.data.product_tag.uuid}`); // this.setState({ ...this.state, readOnly: true, existing_record: true, editing: false })\n          }\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }\n    }, \"ProductTag\", /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"btn btn-success btn-sm\",\n      to: \"/product_configurations/product_tags/new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 19\n      }\n    }, \"New ProductTag\")))), /*#__PURE__*/React.createElement(CardText, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 27\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      name: \"name\",\n      value: this.state.product_tag.name,\n      placeholder: \"ProductTag Name\",\n      onChange: this.onChange,\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 27\n      }\n    }))))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(SubmitButton, {\n      onClick: this.onSubmit,\n      readOnly: this.state.readOnly,\n      editing: this.state.editing,\n      existing_record: this.state.existing_record,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/components/ProductConfigurations/ProductTag.jsx"],"names":["React","Component","Card","CardTitle","CardBody","Row","Col","CardText","Form","FormGroup","Input","Label","FormText","Button","Select","moment","axiosInstance","baseurl","SubmitButton","Link","getProductTagGroups","Dropzone","NumberField","ProductTag","state","product_tag","name","description","rate","editing","readOnly","props","match","params","id","product_tag_uuid","existing_record","onChange","e","console","log","target","setState","value","handleChangeSelect","selectedOption","val","onDateChanged","momentdate","attr_name","new_date","constructor","new_state","date","setProductTages","onValueChange","floatValue","componentDidMount","self","get","then","response","data","onSubmit","preventDefault","instance","post","put","product_tag_id","uuid","history","push","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Card,\n  CardTitle,\n  CardBody,\n  Row,\n  Col,\n  CardText,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n  FormText,\n  Button,\n} from \"reactstrap\";\nimport Select from \"../Controls/Select\";\n\nimport moment from \"moment\";\nimport axiosInstance, { baseurl } from \"../misc/Axios\";\nimport SubmitButton from \"../Controls/SubmitButton\";\nimport { Link } from \"react-router-dom\";\nimport { getProductTagGroups } from \"../misc/functions\";\nimport Dropzone from \"react-dropzone\";\nimport NumberField from \"../Controls/NumberField\";\nexport default class ProductTag extends Component {\n  state = {\n    product_tag: {\n      name: \"\",\n      description: \"\",\n      rate: 0,\n    },\n    editing: false,\n    readOnly:\n      this.props.match.params.id != \"\" && this.props.match.params.id != null,\n    product_tag_uuid: this.props.match.params.id,\n    existing_record:\n      this.props.match.params.id != \"\" && this.props.match.params.id != null,\n  };\n  onChange = (e) => {\n    console.log(e.target.name);\n    this.setState({\n      ...this.state,\n      product_tag: {\n        ...this.state.product_tag,\n        [e.target.name]: e.target.value,\n      },\n    });\n  };\n  handleChangeSelect = (selectedOption, val) => {\n    var state = {\n      ...this.state,\n      product_tag: {\n        ...this.state.product_tag,\n        [selectedOption]: val.value,\n      },\n      [selectedOption]: val,\n    };\n    this.setState({ ...state });\n  };\n  onDateChanged = (momentdate, attr_name) => {\n    // console.log(\"ClassName is\", momentdate.constructor.name)\n    var new_date = new moment();\n    if (momentdate.constructor.name == new_date.constructor.name) {\n      var new_state = {\n        ...this.state,\n        product_tag: {\n          ...this.state.product_tag,\n          [attr_name]: momentdate,\n        },\n      };\n      this.setState({ ...new_state });\n    } else {\n      console.log(this.state.product_tag[attr_name]);\n      var date = new moment(this.state.product_tag[attr_name]);\n      var new_state = {\n        ...this.state,\n        product_tag: {\n          ...this.state.product_tag,\n          [attr_name]: date,\n        },\n      };\n      this.setState({ ...new_state });\n    }\n  };\n\n  setProductTages = (state, product_tag) => {\n    var new_state = {\n      ...state,\n      product_tag: product_tag,\n    };\n    return new_state;\n  };\n  onValueChange = (e, val) => {\n    console.log(val);\n\n    this.setState({\n      ...this.state,\n      product_tag: {\n        ...this.state.product_tag,\n        [e]: val.floatValue,\n      },\n    });\n  };\n\n  componentDidMount = () => {\n    var self = this;\n\n    // Promise.all([]).then(() => {\n    console.log(\"ID\", this.props.match.params.id);\n    if (self.state.existing_record == true) {\n      console.log(\"FECHING EXISTING RECORD\");\n      axiosInstance\n        .get(`/admins/product_tags/${this.state.product_tag_uuid}`)\n        .then((response) => {\n          var new_state = {\n            ...this.state,\n            existing_record: true,\n            readOnly: true,\n          };\n          new_state = self.setProductTages(\n            new_state,\n            response.data.product_tag\n          );\n          self.setState({ ...new_state });\n        });\n    } else {\n      self.setState({\n        ...this.state,\n      });\n    }\n\n    // })\n  };\n\n  onSubmit = (e) => {\n    e.preventDefault();\n    var self = this;\n    if (self.state.readOnly == true && self.state.existing_record == true) {\n      self.setState({\n        ...self.state,\n        readOnly: false,\n      });\n    } else {\n      var instance;\n      if (self.state.existing_record != true) {\n        instance = axiosInstance.post(\"/admins/product_tags\", {\n          product_tag: this.state.product_tag,\n        });\n      } else {\n        instance = axiosInstance.put(\n          `/admins/product_tags/${\n            this.state.product_tag_id || this.state.product_tag.uuid\n          }`,\n          { product_tag: this.state.product_tag }\n        );\n      }\n\n      instance.then((response) => {\n        console.log(\"RESPONSE\", response);\n\n        // console.log(\"Setting state\")\n        if (this.state.existing_record == true) {\n          var new_state = this.setProductTages(\n            this.state,\n            response.data.product_tag\n          );\n          console.log(\"THIS IS NEW STATE\", new_state);\n          this.setState({ ...new_state, readOnly: true });\n        } else {\n          this.props.history.push(\n            `/product_configurations/product_tags/${response.data.product_tag.uuid}`\n          );\n          // this.setState({ ...this.state, readOnly: true, existing_record: true, editing: false })\n        }\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Col md={12}>\n        <Card>\n          <CardBody>\n            <CardTitle className=\"col-md-12\">\n              ProductTag\n              <ul>\n                <li>\n                  <Link\n                    className=\"btn btn-success btn-sm\"\n                    to=\"/product_configurations/product_tags/new\"\n                  >\n                    New ProductTag\n                  </Link>\n                </li>\n              </ul>\n            </CardTitle>\n            <CardText className=\"col-md-12\">\n              <Form className=\"row\">\n                <Col md={12}>\n                  <Row>\n                    <Col md={12}>\n                      <Row>\n                        <FormGroup className=\"col-md-4\">\n                          <Label for=\"name\">Name</Label>\n                          <Input\n                            type=\"text\"\n                            name=\"name\"\n                            value={this.state.product_tag.name}\n                            placeholder=\"ProductTag Name\"\n                            onChange={this.onChange}\n                            readOnly={this.state.readOnly}\n                          />\n                        </FormGroup>\n                      </Row>\n                    </Col>\n                  </Row>\n\n                  <Row></Row>\n                </Col>\n\n                <Col md={12}>\n                  {/* <Row> */}\n                  <SubmitButton\n                    onClick={this.onSubmit}\n                    readOnly={this.state.readOnly}\n                    editing={this.state.editing}\n                    existing_record={this.state.existing_record}\n                  />\n                  {/* </Row> */}\n                </Col>\n              </Form>\n            </CardText>\n          </CardBody>\n        </Card>\n      </Col>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}