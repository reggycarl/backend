{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/components/Reports/Sales.jsx\";\nimport React, { Component } from \"react\";\nimport { Col, Card, CardBody, CardTitle, CardText } from \"reactstrap\";\nimport ReactWillPaginateTable from \"../../lib/ReactWillPaginateTable\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport axiosInstance from \"../misc/Axios\";\nimport * as actions from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport { BarChart, ColumnChart, LineChart, PieChart } from \"react-chartkick\";\nimport \"chartkick/chart.js\";\nimport _ from \"lodash\";\nimport { bindActionCreators } from \"redux\";\nimport Table from \"reactstrap/lib/Table\";\nimport NumberField from \"../Controls/NumberField\";\nimport ReportFilterWidget from \"../ReportFilterWidget/ReportFilterWidget\";\nimport moment from \"moment\";\nimport \"react-datetime/css/react-datetime.css\";\n\nclass Sales extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {},\n      loading: false,\n      start_date: new moment(),\n      end_date: new moment()\n    };\n\n    this.componentDidMount = () => {\n      this.populate();\n    };\n\n    this.run = e => {\n      e.preventDefault();\n      this.populate();\n    };\n\n    this.populate = () => {\n      axiosInstance.get(`${this.props.authentication.default_path}reports/sales?start_date=${this.state.start_date.format(\"YYYY-MM-DD\")}&end_date=${this.state.end_date.format(\"YYYY-MM-DD\")}`).then(response => {\n        console.log(\"THIS IS RESPONSE FON SERVER\", response);\n\n        if (response.status == 200) {\n          this.setState({ ...this.state,\n            data: response.data.data\n          });\n        }\n      });\n    };\n\n    this.onDateChanged = (attr_name, momentdate) => {\n      console.log(\"THIS IS DATE\", momentdate);\n      console.log(\"THIS IS ATTR NAME\", attr_name);\n      var new_date = new moment();\n\n      if (momentdate.constructor.name == new_date.constructor.name) {\n        var new_state = { ...this.state,\n          [attr_name]: momentdate\n        };\n        this.setState({ ...new_state\n        });\n      } else {\n        console.log(this.state[attr_name]);\n        var date = new moment(this.state[attr_name]);\n        var new_state = { ...this.state,\n          [attr_name]: date\n        };\n        this.setState({ ...new_state\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, \"Sales report By Date\"), /*#__PURE__*/React.createElement(CardText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ReportFilterWidget, {\n      run: this.run,\n      onDateChanged: this.onDateChanged,\n      start_date: this.state.start_date,\n      end_date: this.state.end_date,\n      detailed: this.state.detailed,\n      handleChangeToggle: this.handleChangeToggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(LineChart, {\n      data: this.state.data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }, \"\\xA0\"), /*#__PURE__*/React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, \"Amount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, Object.entries(this.state.data).map(item => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      }, item[0]), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }\n      }, item[1]));\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  authentication: state.authentication\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(actions, dispatch)\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Sales));","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/components/Reports/Sales.jsx"],"names":["React","Component","Col","Card","CardBody","CardTitle","CardText","ReactWillPaginateTable","Link","withRouter","axiosInstance","actions","connect","BarChart","ColumnChart","LineChart","PieChart","_","bindActionCreators","Table","NumberField","ReportFilterWidget","moment","Sales","state","data","loading","start_date","end_date","componentDidMount","populate","run","e","preventDefault","get","props","authentication","default_path","format","then","response","console","log","status","setState","onDateChanged","attr_name","momentdate","new_date","constructor","name","new_state","date","render","detailed","handleChangeToggle","Object","entries","map","item","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Col, Card, CardBody, CardTitle, CardText } from \"reactstrap\";\nimport ReactWillPaginateTable from \"../../lib/ReactWillPaginateTable\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport axiosInstance from \"../misc/Axios\";\nimport * as actions from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport { BarChart, ColumnChart, LineChart, PieChart } from \"react-chartkick\";\nimport \"chartkick/chart.js\";\n\nimport _ from \"lodash\";\n\nimport { bindActionCreators } from \"redux\";\nimport Table from \"reactstrap/lib/Table\";\nimport NumberField from \"../Controls/NumberField\";\nimport ReportFilterWidget from \"../ReportFilterWidget/ReportFilterWidget\";\nimport moment from \"moment\";\n\nimport \"react-datetime/css/react-datetime.css\";\nclass Sales extends Component {\n  state = {\n    data: {},\n    loading: false,\n    start_date: new moment(),\n    end_date: new moment(),\n  };\n  componentDidMount = () => {\n    this.populate();\n  };\n  run = (e) => {\n    e.preventDefault();\n    this.populate();\n  };\n  populate = () => {\n    axiosInstance\n      .get(\n        `${\n          this.props.authentication.default_path\n        }reports/sales?start_date=${this.state.start_date.format(\n          \"YYYY-MM-DD\"\n        )}&end_date=${this.state.end_date.format(\"YYYY-MM-DD\")}`\n      )\n      .then((response) => {\n        console.log(\"THIS IS RESPONSE FON SERVER\", response);\n        if (response.status == 200) {\n          this.setState({\n            ...this.state,\n            data: response.data.data,\n          });\n        }\n      });\n  };\n  onDateChanged = (attr_name, momentdate) => {\n    console.log(\"THIS IS DATE\", momentdate);\n    console.log(\"THIS IS ATTR NAME\", attr_name);\n    var new_date = new moment();\n    if (momentdate.constructor.name == new_date.constructor.name) {\n      var new_state = {\n        ...this.state,\n        [attr_name]: momentdate,\n      };\n      this.setState({ ...new_state });\n    } else {\n      console.log(this.state[attr_name]);\n      var date = new moment(this.state[attr_name]);\n      var new_state = {\n        ...this.state,\n        [attr_name]: date,\n      };\n      this.setState({ ...new_state });\n    }\n  };\n  render() {\n    return (\n      <Col md={12}>\n        <Card>\n          <CardBody>\n            <CardTitle>Sales report By Date</CardTitle>\n            <CardText>\n              <ReportFilterWidget\n                run={this.run}\n                onDateChanged={this.onDateChanged}\n                start_date={this.state.start_date}\n                end_date={this.state.end_date}\n                detailed={this.state.detailed}\n                handleChangeToggle={this.handleChangeToggle}\n              />\n              <LineChart data={this.state.data} />\n              <p>&nbsp;</p>\n              <Table striped={true} bordered={true}>\n                <thead>\n                  <tr>\n                    <th>Date</th>\n                    <th>Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {Object.entries(this.state.data).map((item) => {\n                    return (\n                      <tr>\n                        <td>{item[0]}</td>\n                        <td>{item[1]}</td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </Table>\n            </CardText>\n          </CardBody>\n        </Card>\n      </Col>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({ authentication: state.authentication });\nconst mapDispatchToProps = (dispatch) => ({\n  actions: bindActionCreators(actions, dispatch),\n});\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Sales));\n"]},"metadata":{},"sourceType":"module"}