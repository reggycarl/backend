{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/steaman-backend/src/components/Partners/Partner.jsx\";\nimport React, { Component } from \"react\";\nimport { Card, CardTitle, CardBody, Row, Col, CardText, Form, FormGroup, Input, Label, FormText, Button } from \"reactstrap\";\nimport Select from \"../Controls/Select\";\nimport Datetime from \"react-datetime\";\nimport \"react-datetime/css/react-datetime.css\";\nimport moment from \"moment\";\nimport axiosInstance from \"../misc/Axios\";\nimport SubmitButton from \"../Controls/SubmitButton\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Toggle from \"react-toggle\";\nimport { bindActionCreators } from 'redux';\nimport * as actions from '../../actions';\nimport { connect } from 'react-redux';\nimport './products.scss';\nimport { getCategories, getProductsTypes, getGenders, getMaritalStatuses } from \"../misc/functions\";\nimport { history } from \"../../index\";\nimport NumberField from \"../Controls/NumberField\";\nimport \"react-toggle/style.css\";\nimport Dropzone from \"react-dropzone\";\nimport ProductImage from \"./ProductImage\";\n\nclass Product extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      product: {\n        regular_price: 0,\n        sale_price: 0,\n        name: \"\",\n        description: \"\",\n        category_id: null,\n        on_sale: false,\n        active: true,\n        in_stock: true,\n        photos: [],\n        photo_ids: []\n      },\n      editing: false,\n      readOnly: this.props.match.params.id != \"\" && this.props.match.params.id != null,\n      product_uuid: this.props.match.params.id,\n      existing_record: this.props.match.params.id != \"\" && this.props.match.params.id != null\n    };\n\n    this.onChange = e => {\n      console.log(e.target.name);\n      this.setState({ ...this.state,\n        product: { ...this.state.product,\n          [e.target.name]: e.target.value\n        }\n      });\n    };\n\n    this.handleChangeSelect = (selectedOption, val) => {\n      var state = { ...this.state,\n        product: { ...this.state.product,\n          [selectedOption]: val.value\n        },\n        [selectedOption]: val\n      };\n      this.setState({ ...state\n      });\n    };\n\n    this.handleChangeToggle = component => {\n      this.setState({ ...this.state,\n        product: { ...this.state.product,\n          [component.target.id]: component.target.checked\n        }\n      });\n    };\n\n    this.onDateChanged = (momentdate, attr_name) => {\n      // console.log(\"ClassName is\", momentdate.constructor.name)\n      var new_date = new moment();\n\n      if (momentdate.constructor.name == new_date.constructor.name) {\n        var new_state = { ...this.state,\n          product: { ...this.state.product,\n            [attr_name]: momentdate\n          }\n        };\n        this.setState({ ...new_state\n        });\n      } else {\n        console.log(this.state.product[attr_name]);\n        var date = new moment(this.state.product[attr_name]);\n        var new_state = { ...this.state,\n          product: { ...this.state.product,\n            [attr_name]: date\n          }\n        };\n        this.setState({ ...new_state\n        });\n      }\n    };\n\n    this.setProducts = (state, product) => {\n      console.log(\"THIS IS STATE\", state);\n      var new_state = { ...state,\n        product: product,\n        category_id: state.categories.find(obj => obj.value == product.category_id)\n      };\n      return new_state;\n    };\n\n    this.onValueChange = (e, val) => {\n      console.log(val);\n      this.setState({ ...this.state,\n        product: { ...this.state.product,\n          [e]: val.floatValue\n        }\n      });\n    };\n\n    this.componentDidMount = () => {\n      var self = this;\n      Promise.all([getCategories()]).then(([categories]) => {\n        if (self.state.existing_record == true) {\n          console.log(\"FECHING EXISTING RECORD\");\n          axiosInstance.get(`${this.props.authentication.default_path}products/${this.state.product_uuid}`).then(response => {\n            var new_state = { ...this.state,\n              existing_record: true,\n              readOnly: true,\n              categories: categories\n            };\n            new_state = self.setProducts(new_state, response.data.product);\n            self.setState({ ...new_state\n            });\n          });\n        } else {\n          self.setState({ ...this.state,\n            categories: categories\n          });\n        }\n      });\n    };\n\n    this.onDrop = (name, acceptedFiles) => {\n      console.log(name);\n      console.log(acceptedFiles);\n\n      if (this.state.readOnly != true) {\n        acceptedFiles.map((file, i) => {\n          var formData = new FormData();\n          formData.append(\"file\", file);\n          axiosInstance.post(\"/product_photos\", formData).then(response => {\n            this.setState({ ...this.state,\n              product: { ...this.state.product,\n                photo_ids: [...this.state.product.photo_ids, response.data.product_photo.id],\n                photos: [...this.state.product.photos, response.data.product_photo]\n              }\n            });\n          });\n        });\n      }\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      var self = this;\n\n      if (self.state.readOnly == true && self.state.existing_record == true) {\n        self.setState({ ...self.state,\n          readOnly: false\n        });\n      } else {\n        var instance;\n\n        if (self.state.existing_record != true) {\n          instance = axiosInstance.post(`${this.props.authentication.default_path}products`, { ...this.state\n          });\n        } else {\n          instance = axiosInstance.put(`${this.props.authentication.default_path}products/${this.state.product_id || this.state.product.uuid}`, {\n            product: this.state.product\n          });\n        }\n\n        instance.then(response => {\n          console.log(\"RESPONSE\", response); // console.log(\"Setting state\")\n\n          if (this.state.existing_record == true) {\n            var new_state = this.setProducts(this.state, response.data.product);\n            console.log(\"THIS IS NEW STATE\", new_state);\n            this.setState({ ...new_state,\n              readOnly: true\n            });\n          } else {\n            this.props.history.push(`/products/${response.data.product.uuid}`); // this.setState({ ...this.state, readOnly: true, existing_record: true, editing: false })\n          }\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 13\n      }\n    }, \"New Product\", /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"btn btn-success btn-sm\",\n      to: \"${this.props.authentication.default_path}products/new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 19\n      }\n    }, \"New Product\")))), /*#__PURE__*/React.createElement(CardText, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, \"Product Information\"), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"exampleEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 23\n      }\n    }, \"SKU\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      name: \"sku\",\n      value: this.state.product.sku,\n      placeholder: \"Product Code / SKU\",\n      onChange: this.onChange,\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"sale-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }\n    }, \"Active\"), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      className: \"block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Toggle, {\n      id: \"active\",\n      defaultChecked: this.state.product.active,\n      checked: this.state.product.active,\n      disabled: this.state.readOnly,\n      onChange: this.handleChangeToggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 23\n      }\n    })))), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"sale-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 21\n      }\n    }, \"In Stock\"), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      className: \"block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Toggle, {\n      id: \"in_stock\",\n      defaultChecked: this.state.product.in_stock,\n      checked: this.state.product.in_stock,\n      disabled: this.state.readOnly,\n      onChange: this.handleChangeToggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"exampleEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 23\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      name: \"name\",\n      value: this.state.product.name,\n      placeholder: \"Product Name\",\n      onChange: this.onChange,\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"exampleEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 23\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"textarea\",\n      rows: 10,\n      name: \"description\",\n      value: this.state.product.description,\n      placeholder: \"Product Description\",\n      onChange: this.onChange,\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"exampleEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 23\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(NumberField, {\n      name: \"regular_price\",\n      thousandSeparator: true,\n      displayType: \"input\",\n      className: \"right\",\n      value: this.state.product.regular_price,\n      onValueChange: this.onValueChange.bind(this, \"regular_price\"),\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"exampleEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 23\n      }\n    }, \"Sale Price\"), /*#__PURE__*/React.createElement(NumberField, {\n      name: \"sale_price\",\n      thousandSeparator: true,\n      displayType: \"input\",\n      value: this.state.product.sale_price,\n      onValueChange: this.onValueChange.bind(this, \"sale_price\"),\n      readOnly: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"sale-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 21\n      }\n    }, \"On Sale?\"), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      className: \"block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Toggle, {\n      id: \"on_sale\",\n      disabled: this.state.readOnly,\n      defaultChecked: this.state.product.on_sale,\n      checked: this.state.product.on_sale,\n      onChange: this.handleChangeToggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"exampleEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 23\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(Select, {\n      name: \"category_id\",\n      value: this.state.category_id,\n      onChange: this.handleChangeSelect.bind(this, \"category_id\"),\n      options: this.state.categories,\n      isDisabled: this.state.readOnly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 23\n      }\n    })))), /*#__PURE__*/React.createElement(Col, {\n      md: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 19\n      }\n    }, \"Photos\"), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Dropzone, {\n      onDrop: this.readOnly ? null : this.onDrop.bind(null, \"photos\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 21\n      }\n    }, ({\n      getRootProps,\n      getInputProps\n    }) => /*#__PURE__*/React.createElement(Col, Object.assign({\n      id: \"photoBox\"\n    }, getRootProps(), {\n      className: `${this.state.readOnly ? \"\" : \"dropZone\"}  col-md-12`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 61\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 63\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 65\n      }\n    }, this.state.product.photos.map(img => {\n      return /*#__PURE__*/React.createElement(ProductImage, {\n        image: img,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 74\n        }\n      });\n    })))))), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(SubmitButton, {\n      onClick: this.onSubmit,\n      readOnly: this.state.readOnly,\n      editing: this.state.editing,\n      existing_record: this.state.existing_record,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 21\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  authentication: state.authentication\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(actions, dispatch)\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Product));","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/components/Partners/Partner.jsx"],"names":["React","Component","Card","CardTitle","CardBody","Row","Col","CardText","Form","FormGroup","Input","Label","FormText","Button","Select","Datetime","moment","axiosInstance","SubmitButton","Link","withRouter","Toggle","bindActionCreators","actions","connect","getCategories","getProductsTypes","getGenders","getMaritalStatuses","history","NumberField","Dropzone","ProductImage","Product","state","product","regular_price","sale_price","name","description","category_id","on_sale","active","in_stock","photos","photo_ids","editing","readOnly","props","match","params","id","product_uuid","existing_record","onChange","e","console","log","target","setState","value","handleChangeSelect","selectedOption","val","handleChangeToggle","component","checked","onDateChanged","momentdate","attr_name","new_date","constructor","new_state","date","setProducts","categories","find","obj","onValueChange","floatValue","componentDidMount","self","Promise","all","then","get","authentication","default_path","response","data","onDrop","acceptedFiles","map","file","i","formData","FormData","append","post","product_photo","onSubmit","preventDefault","instance","put","product_id","uuid","push","render","sku","bind","getRootProps","getInputProps","img","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Card,\n  CardTitle,\n  CardBody,\n  Row,\n  Col,\n  CardText,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n  FormText,\n  Button,\n} from \"reactstrap\";\nimport Select from \"../Controls/Select\";\nimport Datetime from \"react-datetime\";\nimport \"react-datetime/css/react-datetime.css\";\nimport moment from \"moment\";\nimport axiosInstance from \"../misc/Axios\";\nimport SubmitButton from \"../Controls/SubmitButton\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Toggle from \"react-toggle\";\nimport { bindActionCreators } from 'redux'\nimport * as actions from '../../actions'\nimport { connect } from 'react-redux'\n\nimport './products.scss'\n\nimport {\n  getCategories,\n  getProductsTypes,\n  getGenders,\n  getMaritalStatuses,\n} from \"../misc/functions\";\nimport { history } from \"../../index\";\nimport NumberField from \"../Controls/NumberField\";\nimport \"react-toggle/style.css\";\nimport Dropzone from \"react-dropzone\";\nimport ProductImage from \"./ProductImage\";\nclass Product extends Component {\n  state = {\n    product: {\n      regular_price: 0,\n      sale_price: 0,\n      name: \"\",\n      description: \"\",\n      category_id: null,\n      on_sale: false,\n      active: true,\n      in_stock: true,\n      photos: [],\n      photo_ids: []\n    },\n    editing: false,\n    readOnly:\n      this.props.match.params.id != \"\" && this.props.match.params.id != null,\n    product_uuid: this.props.match.params.id,\n    existing_record:\n      this.props.match.params.id != \"\" && this.props.match.params.id != null,\n  };\n  onChange = (e) => {\n    console.log(e.target.name);\n    this.setState({\n      ...this.state,\n      product: {\n        ...this.state.product,\n        [e.target.name]: e.target.value,\n      },\n    });\n  };\n  handleChangeSelect = (selectedOption, val) => {\n    var state = {\n      ...this.state,\n      product: {\n        ...this.state.product,\n        [selectedOption]: val.value,\n      },\n      [selectedOption]: val,\n    };\n    this.setState({ ...state });\n  };\n\n  handleChangeToggle = (component)=> {\n    \n    this.setState({\n      ...this.state,\n      product: {\n        ...this.state.product,\n        [component.target.id]: component.target.checked\n      }\n    })\n    \n  }\n  onDateChanged = (momentdate, attr_name) => {\n    // console.log(\"ClassName is\", momentdate.constructor.name)\n    var new_date = new moment();\n    if (momentdate.constructor.name == new_date.constructor.name) {\n      var new_state = {\n        ...this.state,\n        product: {\n          ...this.state.product,\n          [attr_name]: momentdate,\n        },\n      };\n      this.setState({ ...new_state });\n    } else {\n      console.log(this.state.product[attr_name]);\n      var date = new moment(this.state.product[attr_name]);\n      var new_state = {\n        ...this.state,\n        product: {\n          ...this.state.product,\n          [attr_name]: date,\n        },\n      };\n      this.setState({ ...new_state });\n    }\n  };\n\n  setProducts = (state, product) => {\n    console.log(\"THIS IS STATE\", state);\n    var new_state = {\n      ...state,\n      product: product,\n\n      category_id: state.categories.find(\n        (obj) => obj.value == product.category_id\n      ),\n    };\n    return new_state;\n  };\n  onValueChange = (e, val) => {\n    console.log(val);\n\n    this.setState({\n      ...this.state,\n      product: {\n        ...this.state.product,\n        [e]: val.floatValue,\n      },\n    });\n  };\n  componentDidMount = () => {\n    var self = this;\n\n    Promise.all([getCategories()]).then(([categories]) => {\n      if (self.state.existing_record == true) {\n        console.log(\"FECHING EXISTING RECORD\");\n        axiosInstance\n          .get(`${this.props.authentication.default_path}products/${this.state.product_uuid}`)\n          .then((response) => {\n            var new_state = {\n              ...this.state,\n              existing_record: true,\n              readOnly: true,\n              categories: categories,\n            };\n            new_state = self.setProducts(new_state, response.data.product);\n            self.setState({ ...new_state });\n          });\n      } else {\n        self.setState({\n          ...this.state,\n          categories: categories,\n        });\n      }\n    });\n  };\n  onDrop = (name, acceptedFiles) => {\n    console.log(name);\n    console.log(acceptedFiles);\n    if (this.state.readOnly != true) {\n        acceptedFiles.map((file, i) => {\n            var formData = new FormData();\n            formData.append(\"file\", file)\n            axiosInstance.post(\"/product_photos\", formData).then(response => {\n                this.setState({\n                    ...this.state,\n                    product: {\n                        ...this.state.product,\n                        photo_ids: [...this.state.product.photo_ids, response.data.product_photo.id],\n                        photos: [...this.state.product.photos,\n                            response.data.product_photo]\n                    }\n                })\n            })\n        })\n    }\n\n}\n\n  onSubmit = (e) => {\n    e.preventDefault();\n    var self = this;\n    if (self.state.readOnly == true && self.state.existing_record == true) {\n      self.setState({\n        ...self.state,\n        readOnly: false,\n      });\n    } else {\n      var instance;\n      if (self.state.existing_record != true) {\n        instance = axiosInstance.post(`${this.props.authentication.default_path}products`, { ...this.state });\n      } else {\n        instance = axiosInstance.put(\n          `${this.props.authentication.default_path}products/${\n            this.state.product_id || this.state.product.uuid\n          }`,\n          { product: this.state.product }\n        );\n      }\n\n      instance.then((response) => {\n        console.log(\"RESPONSE\", response);\n\n        // console.log(\"Setting state\")\n        if (this.state.existing_record == true) {\n          var new_state = this.setProducts(this.state, response.data.product);\n          console.log(\"THIS IS NEW STATE\", new_state);\n          this.setState({ ...new_state, readOnly: true });\n        } else {\n          this.props.history.push(\n            `/products/${response.data.product.uuid}`\n          );\n          // this.setState({ ...this.state, readOnly: true, existing_record: true, editing: false })\n        }\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Col md={12}>\n        <Card>\n          <CardBody>\n            <CardTitle className=\"col-md-12\">\n              New Product\n              <ul>\n                <li>\n                  <Link\n                    className=\"btn btn-success btn-sm\"\n                    to=\"${this.props.authentication.default_path}products/new\"\n                  >\n                    New Product\n                  </Link>\n                </li>\n              </ul>\n            </CardTitle>\n            <CardText className=\"col-md-12\">\n              <Form className=\"row\">\n                <Col md={6}>\n                <h5>Product Information</h5>\n                  <Row>\n                    <FormGroup className=\"col-md-4\">\n                      <Label for=\"exampleEmail\">SKU</Label>\n                      <Input\n                        type=\"text\"\n                        name=\"sku\"\n                        value={this.state.product.sku}\n                        placeholder=\"Product Code / SKU\"\n                        onChange={this.onChange}\n                        readOnly={this.state.readOnly}\n                      />\n                    </FormGroup>\n                    <FormGroup className=\"col-md-2\">\n                    <Label for=\"sale-price\">Active</Label>\n                    <Col md={12} className='block'>\n                      <Row>\n                      <Toggle\n                        \n                        \n                        id='active'\n                        defaultChecked={this.state.product.active}\n                        checked={this.state.product.active}\n                        disabled={this.state.readOnly}\n                        onChange={this.handleChangeToggle} />\n                        </Row>\n                        </Col>\n                    </FormGroup>\n                    <FormGroup className=\"col-md-2\">\n                    <Label for=\"sale-price\">In Stock</Label>\n                    <Col md={12} className='block'>\n                      <Row>\n                      <Toggle\n                        \n                        id='in_stock'\n                        defaultChecked={this.state.product.in_stock}\n                        checked={this.state.product.in_stock}\n                        disabled={this.state.readOnly}\n                        onChange={this.handleChangeToggle} />\n                        </Row>\n                        </Col>\n                    </FormGroup>\n                  </Row>\n                  <Row>\n                    <FormGroup className=\"col-md-12\">\n                      <Label for=\"exampleEmail\">Name</Label>\n                      <Input\n                        type=\"text\"\n                        name=\"name\"\n                        value={this.state.product.name}\n                        placeholder=\"Product Name\"\n                        onChange={this.onChange}\n                        readOnly={this.state.readOnly}\n                      />\n                    </FormGroup>\n                  </Row>\n                  <Row>\n                    <FormGroup className=\"col-md-12\">\n                      <Label for=\"exampleEmail\">Description</Label>\n                      <Input\n                        type=\"textarea\"\n                        rows={10}\n                        name=\"description\"\n                        value={this.state.product.description}\n                        placeholder=\"Product Description\"\n                        onChange={this.onChange}\n                        readOnly={this.state.readOnly}\n                      />\n                    </FormGroup>\n                  </Row>\n                  <Row>\n                    <FormGroup className=\"col-md-4\">\n                      <Label for=\"exampleEmail\">Price</Label>\n                      <NumberField\n                        name=\"regular_price\"\n                        thousandSeparator={true}\n                        displayType={\"input\"}\n                        className={\"right\"}\n                        value={this.state.product.regular_price}\n                        onValueChange={this.onValueChange.bind(\n                          this,\n                          \"regular_price\"\n                        )}\n                        readOnly={this.state.readOnly}\n                      />\n                    </FormGroup>\n\n                    <FormGroup className=\"col-md-4\">\n                      <Label for=\"exampleEmail\">Sale Price</Label>\n                      <NumberField\n                        name=\"sale_price\"\n                        thousandSeparator={true}\n                        displayType={\"input\"}\n                        value={this.state.product.sale_price}\n                        onValueChange={this.onValueChange.bind(\n                          this,\n                          \"sale_price\"\n                        )}\n                        readOnly={this.state.readOnly}\n                      />\n                    </FormGroup>\n                    <FormGroup className=\"col-md-4\">\n                    <Label for=\"sale-price\">On Sale?</Label>\n                    <Col md={12} className='block'>\n                      <Row>\n                      <Toggle\n                        id=\"on_sale\"\n                        disabled={this.state.readOnly}\n                        defaultChecked={this.state.product.on_sale}\n                        checked={this.state.product.on_sale}\n                        onChange={this.handleChangeToggle} />\n                        </Row>\n                        </Col>\n                    </FormGroup>\n                  </Row>\n\n                  <Row>\n                    <FormGroup className=\"col-md-12\">\n                      <Label for=\"exampleEmail\">Category</Label>\n                      <Select\n                        name=\"category_id\"\n                        value={this.state.category_id}\n                        onChange={this.handleChangeSelect.bind(\n                          this,\n                          \"category_id\"\n                        )}\n                        options={this.state.categories}\n                        isDisabled={this.state.readOnly}\n                      />\n                    </FormGroup>\n                  </Row>\n                </Col>\n                <Col md={6}>\n                  <h5>Photos</h5>\n                  <Row>\n                    \n                    <Dropzone onDrop={ this.readOnly ? null : this.onDrop.bind(null, \"photos\")}>\n                                                        {({ getRootProps, getInputProps }) => (\n\n                                                            <Col id='photoBox' {...getRootProps()} className={`${this.state.readOnly ? \"\" : \"dropZone\"}  col-md-12`} >\n                                                              <input {...getInputProps()} />\n                                                                \n                                                                <Row>\n                                                                {this.state.product.photos.map((img) => {\n                                                                  return <ProductImage image={img}  />\n                                                                })}\n                                                                </Row>\n                                                            </Col>\n\n                                                        )}\n                                                    </Dropzone>\n                  </Row>\n                </Col>\n                <Col md={12}>\n                </Col>\n\n                <Col md={12}>\n                  \n                    <SubmitButton\n                      onClick={this.onSubmit}\n                      readOnly={this.state.readOnly}\n                      editing={this.state.editing}\n                      existing_record={this.state.existing_record}\n                    />\n                  \n                </Col>\n              </Form>\n            </CardText>\n          </CardBody>\n        </Card>\n      </Col>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => ({ authentication: state.authentication })\nconst mapDispatchToProps = dispatch => ({ actions: bindActionCreators(actions, dispatch) })\nexport default withRouter( connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Product));"]},"metadata":{},"sourceType":"module"}