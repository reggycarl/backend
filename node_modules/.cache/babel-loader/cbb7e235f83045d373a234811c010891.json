{"ast":null,"code":"import { errorMessages } from '../components/misc/Axios';\n\nconst authentication_reducer = (initialState = {\n  user: JSON.parse(localStorage.getItem(\"user\")) || \"\",\n  token: localStorage.getItem(\"token\") || \"\",\n  uid: localStorage.getItem(\"uid\") || \"\",\n  client: localStorage.getItem(\"client\") || \"\",\n  default_path: localStorage.getItem(\"default_path\") || \"\",\n  loggedIn: localStorage.getItem(\"loggedIn\") || false,\n  error_message: null\n}, action) => {\n  switch (action.type) {\n    case \"SAVE_USER\":\n      return { ...action.payload\n      };\n      break;\n\n    case \"TOGGLE_APP_DRAWER\":\n      return { ...initialState,\n        show_app_drawer: !(initialState.show_app_drawer || false)\n      };\n      break;\n\n    case \"PRINTDOCUMENT\":\n      return { ...initialState,\n        show_print_dialog: true\n      };\n\n    case \"LOGGINGIN\":\n      return { ...initialState,\n        loading: true\n      };\n\n    case \"HIDE_APP_DRAWER\":\n      return { ...initialState,\n        show_app_drawer: false\n      };\n      break;\n\n    case \"LOGIN_SUCCESS\":\n      setLocalData(action);\n      return { ...initialState,\n        user: action.user.data,\n        token: action.token,\n        uid: action.uid,\n        client: action.client,\n        default_path: action.default_path,\n        loggedIn: true,\n        loginErrorMessage: null,\n        loading: false\n      };\n      break;\n\n    case \"SIGNUP_FAILED\":\n      return { ...initialState,\n        signing_up: false,\n        signupErrorMessage: action.error_message.response.data.errors.full_messages\n      };\n      break;\n\n    case \"UPDATE_USER\":\n      localStorage.setItem(\"user\", JSON.stringify(action.user));\n      return { ...initialState,\n        user: action.user\n      };\n      break;\n\n    case \"SIGNUP_IN_PROGRESS\":\n      return { ...initialState,\n        signupErrorMessage: null,\n        signing_up: true\n      };\n      break;\n\n    case \"SIGNUP_SUCCESS\":\n      return { ...initialState,\n        signupErrorMessage: null,\n        signing_up: false,\n        signupSuccessMessage: \"An email has been sent to your email. Kindly Confirm your Account via the email\"\n      };\n      break;\n\n    case \"LOGIN_FAILED\":\n      if (action.hasOwnProperty('error_message')) {\n        localStorage.setItem(\"user\", null);\n        localStorage.setItem(\"token\", null);\n        localStorage.setItem(\"uid\", null);\n        localStorage.setItem(\"client\", null);\n        localStorage.setItem(\"loggedIn\", false);\n        var state = { ...initialState,\n          user: \"\",\n          token: \"\",\n          uid: \"\",\n          client: \"\",\n          user: \"\",\n          company: \"\",\n          loading: false,\n          loginErrorMessage: typeof action.error_message == 'string' ? action.error_message : errorMessages(action.error_message.response.data)\n        };\n      } else {\n        state = { ...initialState,\n          user: \"\",\n          token: \"\",\n          uid: \"\",\n          client: \"\",\n          user: \"\",\n          company: \"\",\n          loading: false,\n          loginErrorMessage: errorMessages(\"Something Strange Happened\")\n        };\n      }\n\n      return state;\n      break;\n\n    case \"LOGOUT_SUCCESS\":\n      console.log(\"CLEARING USER DATA\");\n      state = { ...initialState,\n        user: \"\",\n        token: \"\",\n        uid: \"\",\n        client: \"\",\n        user: \"\",\n        company: \"\",\n        loading: false,\n        loggedIn: false,\n        default_path: \"\",\n        authentication: {}\n      };\n      localStorage.removeItem(\"user\", null);\n      localStorage.removeItem(\"token\", null);\n      localStorage.removeItem(\"uid\", null);\n      localStorage.removeItem(\"client\", null);\n      localStorage.removeItem(\"loggedIn\");\n      localStorage.removeItem(\"default_path\");\n      window.location.href = \"/\"; //TODO This is just a temp soln\n\n      return state;\n      break;\n\n    default:\n      return initialState;\n      break;\n  }\n};\n\nasync function setLocalData(action) {\n  await localStorage.setItem(\"user\", JSON.stringify(action.user.data));\n  await localStorage.setItem(\"token\", action.token);\n  await localStorage.setItem(\"uid\", action.uid);\n  await localStorage.setItem(\"client\", action.client);\n  await localStorage.setItem(\"default_path\", action.default_path);\n  await localStorage.setItem(\"loggedIn\", true);\n}\n\nexport default authentication_reducer;","map":{"version":3,"sources":["/Users/mac/Desktop/steaman-backend/src/reducers/authentication_reducers.js"],"names":["errorMessages","authentication_reducer","initialState","user","JSON","parse","localStorage","getItem","token","uid","client","default_path","loggedIn","error_message","action","type","payload","show_app_drawer","show_print_dialog","loading","setLocalData","data","loginErrorMessage","signing_up","signupErrorMessage","response","errors","full_messages","setItem","stringify","signupSuccessMessage","hasOwnProperty","state","company","console","log","authentication","removeItem","window","location","href"],"mappings":"AAAA,SAASA,aAAT,QAA8B,0BAA9B;;AACA,MAAMC,sBAAsB,GAAI,CAACC,YAAY,GAAG;AAAEC,EAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,KAA4C,EAApD;AAAwDC,EAAAA,KAAK,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,EAAhG;AAAoGE,EAAAA,GAAG,EAAEH,YAAY,CAACC,OAAb,CAAqB,KAArB,KAA+B,EAAxI;AAA6IG,EAAAA,MAAM,EAAEJ,YAAY,CAACC,OAAb,CAAqB,QAArB,KAAkC,EAAvL;AAA4LI,EAAAA,YAAY,EAAEL,YAAY,CAACC,OAAb,CAAqB,cAArB,KAAwC,EAAlP;AAAuPK,EAAAA,QAAQ,EAAEN,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,KAArS;AAA4SM,EAAAA,aAAa,EAAE;AAA3T,CAAhB,EAAmVC,MAAnV,KAA8V;AAC1X,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,WAAL;AACI,aAAO,EACH,GAAGD,MAAM,CAACE;AADP,OAAP;AAGA;;AAEJ,SAAK,mBAAL;AACA,aAAO,EACH,GAAGd,YADA;AAEHe,QAAAA,eAAe,EAAE,EAAEf,YAAY,CAACe,eAAb,IAAgC,KAAlC;AAFd,OAAP;AAIA;;AACA,SAAK,eAAL;AACA,aAAO,EACH,GAAGf,YADA;AAEHgB,QAAAA,iBAAiB,EAAE;AAFhB,OAAP;;AAIA,SAAK,WAAL;AAEA,aAAM,EACF,GAAGhB,YADD;AAEFiB,QAAAA,OAAO,EAAE;AAFP,OAAN;;AAIA,SAAK,iBAAL;AACA,aAAO,EACH,GAAGjB,YADA;AAEHe,QAAAA,eAAe,EAAE;AAFd,OAAP;AAIA;;AAEA,SAAK,eAAL;AAEIG,MAAAA,YAAY,CAACN,MAAD,CAAZ;AAEA,aAAO,EACH,GAAGZ,YADA;AAEHC,QAAAA,IAAI,EAAEW,MAAM,CAACX,IAAP,CAAYkB,IAFf;AAGHb,QAAAA,KAAK,EAAEM,MAAM,CAACN,KAHX;AAIHC,QAAAA,GAAG,EAAEK,MAAM,CAACL,GAJT;AAKHC,QAAAA,MAAM,EAAEI,MAAM,CAACJ,MALZ;AAMHC,QAAAA,YAAY,EAAEG,MAAM,CAACH,YANlB;AAOHC,QAAAA,QAAQ,EAAE,IAPP;AAQHU,QAAAA,iBAAiB,EAAE,IARhB;AASHH,QAAAA,OAAO,EAAE;AATN,OAAP;AAWA;;AACJ,SAAK,eAAL;AACI,aAAO,EACH,GAAGjB,YADA;AAEHqB,QAAAA,UAAU,EAAE,KAFT;AAGHC,QAAAA,kBAAkB,EAAEV,MAAM,CAACD,aAAP,CAAqBY,QAArB,CAA8BJ,IAA9B,CAAmCK,MAAnC,CAA0CC;AAH3D,OAAP;AAMJ;;AACA,SAAK,aAAL;AACArB,MAAAA,YAAY,CAACsB,OAAb,CAAqB,MAArB,EAA6BxB,IAAI,CAACyB,SAAL,CAAef,MAAM,CAACX,IAAtB,CAA7B;AACA,aAAO,EACH,GAAGD,YADA;AAEHC,QAAAA,IAAI,EAAEW,MAAM,CAACX;AAFV,OAAP;AAIJ;;AACI,SAAK,oBAAL;AACA,aAAO,EACH,GAAGD,YADA;AAEHsB,QAAAA,kBAAkB,EAAE,IAFjB;AAGHD,QAAAA,UAAU,EAAE;AAHT,OAAP;AAKA;;AACA,SAAK,gBAAL;AACI,aAAO,EACH,GAAGrB,YADA;AAEHsB,QAAAA,kBAAkB,EAAE,IAFjB;AAGHD,QAAAA,UAAU,EAAE,KAHT;AAIHO,QAAAA,oBAAoB,EAAE;AAJnB,OAAP;AAMJ;;AACA,SAAK,cAAL;AAEI,UAAIhB,MAAM,CAACiB,cAAP,CAAsB,eAAtB,CAAJ,EAA4C;AAExCzB,QAAAA,YAAY,CAACsB,OAAb,CAAqB,MAArB,EAA6B,IAA7B;AACAtB,QAAAA,YAAY,CAACsB,OAAb,CAAqB,OAArB,EAA8B,IAA9B;AACAtB,QAAAA,YAAY,CAACsB,OAAb,CAAqB,KAArB,EAA4B,IAA5B;AACAtB,QAAAA,YAAY,CAACsB,OAAb,CAAqB,QAArB,EAA+B,IAA/B;AACAtB,QAAAA,YAAY,CAACsB,OAAb,CAAqB,UAArB,EAAiC,KAAjC;AACA,YAAII,KAAK,GAAG,EACR,GAAG9B,YADK;AAERC,UAAAA,IAAI,EAAE,EAFE;AAGRK,UAAAA,KAAK,EAAE,EAHC;AAIRC,UAAAA,GAAG,EAAE,EAJG;AAKRC,UAAAA,MAAM,EAAE,EALA;AAMRP,UAAAA,IAAI,EAAE,EANE;AAOR8B,UAAAA,OAAO,EAAE,EAPD;AAQRd,UAAAA,OAAO,EAAE,KARD;AASRG,UAAAA,iBAAiB,EAAE,OAAOR,MAAM,CAACD,aAAd,IAA+B,QAA/B,GAA0CC,MAAM,CAACD,aAAjD,GAAiEb,aAAa,CAACc,MAAM,CAACD,aAAP,CAAqBY,QAArB,CAA8BJ,IAA/B;AATzF,SAAZ;AAWH,OAlBD,MAmBK;AACDW,QAAAA,KAAK,GAAG,EACJ,GAAG9B,YADC;AAEJC,UAAAA,IAAI,EAAE,EAFF;AAGJK,UAAAA,KAAK,EAAE,EAHH;AAIJC,UAAAA,GAAG,EAAE,EAJD;AAKJC,UAAAA,MAAM,EAAE,EALJ;AAMJP,UAAAA,IAAI,EAAE,EANF;AAOJ8B,UAAAA,OAAO,EAAE,EAPL;AAQJd,UAAAA,OAAO,EAAE,KARL;AASJG,UAAAA,iBAAiB,EAAEtB,aAAa,CAAC,4BAAD;AAT5B,SAAR;AAYH;;AACD,aAAOgC,KAAP;AACA;;AACJ,SAAK,gBAAL;AACIE,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAH,MAAAA,KAAK,GAAG,EACJ,GAAG9B,YADC;AAEJC,QAAAA,IAAI,EAAE,EAFF;AAGJK,QAAAA,KAAK,EAAE,EAHH;AAIJC,QAAAA,GAAG,EAAE,EAJD;AAKJC,QAAAA,MAAM,EAAE,EALJ;AAMJP,QAAAA,IAAI,EAAE,EANF;AAOJ8B,QAAAA,OAAO,EAAE,EAPL;AAQJd,QAAAA,OAAO,EAAE,KARL;AASJP,QAAAA,QAAQ,EAAE,KATN;AAUJD,QAAAA,YAAY,EAAE,EAVV;AAWJyB,QAAAA,cAAc,EAAE;AAXZ,OAAR;AAaA9B,MAAAA,YAAY,CAAC+B,UAAb,CAAwB,MAAxB,EAAgC,IAAhC;AACA/B,MAAAA,YAAY,CAAC+B,UAAb,CAAwB,OAAxB,EAAiC,IAAjC;AACA/B,MAAAA,YAAY,CAAC+B,UAAb,CAAwB,KAAxB,EAA+B,IAA/B;AACA/B,MAAAA,YAAY,CAAC+B,UAAb,CAAwB,QAAxB,EAAkC,IAAlC;AACA/B,MAAAA,YAAY,CAAC+B,UAAb,CAAwB,UAAxB;AACA/B,MAAAA,YAAY,CAAC+B,UAAb,CAAwB,cAAxB;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB,CArBJ,CAqB+B;;AAC3B,aAAOR,KAAP;AACA;;AACJ;AACI,aAAO9B,YAAP;AACA;AA5IR;AA8IH,CA/ID;;AAiJA,eAAgBkB,YAAhB,CAA6BN,MAA7B,EAAoC;AAChC,QAAOR,YAAY,CAACsB,OAAb,CAAqB,MAArB,EAA6BxB,IAAI,CAACyB,SAAL,CAAef,MAAM,CAACX,IAAP,CAAYkB,IAA3B,CAA7B,CAAP;AACA,QAAOf,YAAY,CAACsB,OAAb,CAAqB,OAArB,EAA8Bd,MAAM,CAACN,KAArC,CAAP;AACA,QAAMF,YAAY,CAACsB,OAAb,CAAqB,KAArB,EAA4Bd,MAAM,CAACL,GAAnC,CAAN;AACA,QAAMH,YAAY,CAACsB,OAAb,CAAqB,QAArB,EAA+Bd,MAAM,CAACJ,MAAtC,CAAN;AACA,QAAMJ,YAAY,CAACsB,OAAb,CAAqB,cAArB,EAAqCd,MAAM,CAACH,YAA5C,CAAN;AACA,QAAML,YAAY,CAACsB,OAAb,CAAqB,UAArB,EAAiC,IAAjC,CAAN;AACH;;AAED,eAAe3B,sBAAf","sourcesContent":["import { errorMessages } from '../components/misc/Axios'\nconst authentication_reducer =  (initialState = { user: JSON.parse(localStorage.getItem(\"user\")) || \"\", token: localStorage.getItem(\"token\") || \"\", uid: localStorage.getItem(\"uid\") || \"\" , client: localStorage.getItem(\"client\") || \"\" , default_path: localStorage.getItem(\"default_path\") || \"\" , loggedIn: localStorage.getItem(\"loggedIn\") || false, error_message: null }, action) => {\n    switch (action.type) {\n        case \"SAVE_USER\":\n            return {\n                ...action.payload\n            }\n            break;\n\n        case \"TOGGLE_APP_DRAWER\": \n        return {\n            ...initialState,\n            show_app_drawer: !(initialState.show_app_drawer || false)\n        }\n        break;\n        case \"PRINTDOCUMENT\": \n        return {\n            ...initialState,\n            show_print_dialog: true\n        }\n        case \"LOGGINGIN\":\n        \n        return{\n            ...initialState,\n            loading: true\n        }\n        case \"HIDE_APP_DRAWER\": \n        return {\n            ...initialState,\n            show_app_drawer: false,\n        }\n        break;\n       \n        case \"LOGIN_SUCCESS\":\n            \n            setLocalData(action);\n\n            return {\n                ...initialState,\n                user: action.user.data,\n                token: action.token,\n                uid: action.uid,\n                client: action.client,\n                default_path: action.default_path,\n                loggedIn: true,\n                loginErrorMessage: null,\n                loading: false\n            }\n            break;\n        case \"SIGNUP_FAILED\": \n            return {\n                ...initialState,\n                signing_up: false,\n                signupErrorMessage: action.error_message.response.data.errors.full_messages\n\n            }\n        break;\n        case \"UPDATE_USER\": \n        localStorage.setItem(\"user\", JSON.stringify(action.user))\n        return {\n            ...initialState,\n            user: action.user\n        }\n    break;\n        case \"SIGNUP_IN_PROGRESS\": \n        return {\n            ...initialState,\n            signupErrorMessage: null,\n            signing_up: true\n        }\n        break;\n        case \"SIGNUP_SUCCESS\":\n            return {\n                ...initialState,\n                signupErrorMessage: null,\n                signing_up: false,\n                signupSuccessMessage: \"An email has been sent to your email. Kindly Confirm your Account via the email\"\n            }\n        break;\n        case \"LOGIN_FAILED\":\n            \n            if (action.hasOwnProperty('error_message')) {\n\n                localStorage.setItem(\"user\", null)\n                localStorage.setItem(\"token\", null)\n                localStorage.setItem(\"uid\", null)\n                localStorage.setItem(\"client\", null)\n                localStorage.setItem(\"loggedIn\", false)\n                var state = {\n                    ...initialState,\n                    user: \"\",\n                    token: \"\",\n                    uid: \"\",\n                    client: \"\",\n                    user: \"\",\n                    company: \"\",\n                    loading: false,\n                    loginErrorMessage: typeof action.error_message == 'string' ? action.error_message : errorMessages(action.error_message.response.data)\n                }\n            }\n            else {\n                state = {\n                    ...initialState,\n                    user: \"\",\n                    token: \"\",\n                    uid: \"\",\n                    client: \"\",\n                    user: \"\",\n                    company: \"\",\n                    loading: false,\n                    loginErrorMessage: errorMessages(\"Something Strange Happened\")\n\n                }\n            }\n            return state\n            break;\n        case \"LOGOUT_SUCCESS\":\n            console.log(\"CLEARING USER DATA\")\n            state = {\n                ...initialState,\n                user: \"\",\n                token: \"\",\n                uid: \"\",\n                client: \"\",\n                user: \"\",\n                company: \"\",\n                loading: false,\n                loggedIn: false,\n                default_path: \"\",\n                authentication: {}\n            }\n            localStorage.removeItem(\"user\", null)\n            localStorage.removeItem(\"token\", null)\n            localStorage.removeItem(\"uid\", null)\n            localStorage.removeItem(\"client\", null)\n            localStorage.removeItem(\"loggedIn\")\n            localStorage.removeItem(\"default_path\")\n            window.location.href = \"/\" //TODO This is just a temp soln\n            return state\n            break;\n        default:\n            return initialState\n            break;\n    }\n}\n\nasync function  setLocalData(action){\n    await  localStorage.setItem(\"user\", JSON.stringify(action.user.data))\n    await  localStorage.setItem(\"token\", action.token)\n    await localStorage.setItem(\"uid\", action.uid)\n    await localStorage.setItem(\"client\", action.client)\n    await localStorage.setItem(\"default_path\", action.default_path)\n    await localStorage.setItem(\"loggedIn\", true)\n}\n\nexport default authentication_reducer;"]},"metadata":{},"sourceType":"module"}